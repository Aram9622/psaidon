var closetimer=0,ddmenuitem=0,homemenuloaded=0;function mopen(a,d){"homemenu"==a&&0==homemenuloaded&&(basicahah(imasroot+"/gethomemenu.php?cid="+d,"homemenu"),homemenuloaded=1);mcancelclosetime();ddmenuitem?(ddmenuitem.style.visibility="hidden",ddmenuitem=null):(ddmenuitem=document.getElementById(a),ddmenuitem.style.visibility="visible")}function mclose(){ddmenuitem&&(ddmenuitem.style.visibility="hidden",ddmenuitem=null)}function mclosetime(){closetimer=window.setTimeout(mclose,250)}
function mcancelclosetime(){closetimer&&(window.clearTimeout(closetimer),closetimer=null)}function basicahah(a,d,c){null==c&&(c=" Fetching data... ");document.getElementById(d).innerHTML=c;c=!1;window.XMLHttpRequest?(req=new XMLHttpRequest,c=!0):window.ActiveXObject&&(req=new ActiveXObject("Microsoft.XMLHTTP"),c=!0);c&&(req.onreadystatechange=function(){basicahahDone(a,d)},req.open("GET",a,!0),req.send(""))}
function basicahahDone(a,d){4==req.readyState&&(200==req.status?document.getElementById(d).innerHTML=req.responseText:document.getElementById(d).innerHTML=" AHAH Error:\n"+req.status+"\n"+req.statusText)}function arraysearch(a,d){for(var c=0;c<d.length;c++)if(d[c]==a)return c;return-1}var tipobj=0;
function tipshow(a,d){"object"!=typeof tipobj&&(tipobj=document.createElement("div"),tipobj.className="tips",document.getElementsByTagName("body")[0].appendChild(tipobj));tipobj.innerHTML=d;tipobj.style.left="5px";tipobj.style.display="block";"undefined"!=typeof usingASCIIMath&&"undefined"!=typeof noMathRender&&usingASCIIMath&&!noMathRender&&rendermathnode(tipobj);var c=findPos(a);self.innerHeight?x=self.innerWidth:document.documentElement&&document.documentElement.clientHeight?x=document.documentElement.clientWidth:
document.body&&(x=document.body.clientWidth);var f=0;"number"==typeof window.pageYOffset?f=window.pageXOffset:document.body&&(document.body.scrollLeft||document.body.scrollTop)?f=document.body.scrollLeft:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(f=document.documentElement.scrollLeft);x+=f;c[0]+tipobj.offsetWidth>x&&(c[0]=x-tipobj.offsetWidth-30);tipobj.style.left=c[0]+20+"px";tipobj.style.top=30>c[1]?c[1]+20+"px":c[1]-tipobj.offsetHeight+
"px"}var popupwins=[];function popupwindow(a,d,c,f,h){"fit"==f&&(f=window.height-80);c="width="+c+",height="+f+",status=0,resizable=1,directories=0,menubar=0";null!=h&&1==h&&(c+=",scrollbars=1");"undefined"==typeof popupwins[a]||popupwins[a].closed||popupwins[a].focus();d.match(/^http/)?popupwins[a]=window.open(d,a,c):(h=window.open("",a,c),h.document.write("<html><head><title>Popup</title></head><body>"),h.document.write(d),h.document.write("</body></html>"),h.document.close(),popupwins[a]=h)}
function tipout(a){tipobj.style.display="none"}function findPos(a){var d=curtop=0;if(a.offsetParent){do d+=a.offsetLeft,curtop+=a.offsetTop,a.offsetParent&&(a.parentNode&&a.offsetParent!=a.parentNode?(d-=a.parentNode.scrollLeft,curtop-=a.parentNode.scrollTop):(d-=a.offsetParent.scrollLeft,curtop-=a.offsetParent.scrollTop));while(a=a.offsetParent)}return[d,curtop]}
function togglepic(a){a.getAttribute("src").match("userimg_sm")?a.setAttribute("src",a.getAttribute("src").replace("_sm","_")):a.setAttribute("src",a.getAttribute("src").replace("_","_sm"))}function addLoadEvent(a){var d=window.onload;window.onload="function"!=typeof window.onload?a:function(){d&&d();a()}}
function submitlimiter(a){var d=a.target;"submitted"==d.className?(alert("You have already submitted this page.  Please be patient while your submission is processed."),d.className="submitted2",a.preventDefault?a.preventDefault():a.returnValue=!1):"submitted2"==d.className?a.preventDefault?a.preventDefault():a.returnValue=!1:d.className="submitted"}
function setupFormLimiters(){for(var a=document.getElementsByTagName("form"),d=0;d<a.length;d++)if("function"!=typeof a[d].onsubmit&&"nolimit"!=a[d].className)$(a[d]).on("submit",submitlimiter)}addLoadEvent(setupFormLimiters);var GB_loaded=!1;
function GB_show(a,d,c,f){if(0==GB_loaded){var h=document.createElement("div");h.id="GB_overlay";h.onclick=GB_hide;document.getElementsByTagName("body")[0].appendChild(h);h=document.createElement("div");h.id="GB_window";h.innerHTML='<div id="GB_caption"></div><div id="GB_loading">Loading...</div><div id="GB_frameholder" ></div>';document.getElementsByTagName("body")[0].appendChild(h);GB_loaded=!0}document.getElementById("GB_frameholder").innerHTML='<iframe onload="GB_doneload()" id="GB_frame" src="'+
d+'"></iframe>';jQuery("#GB_frameholder").isolatedScroll();d.match(/libtree/)?(document.getElementById("GB_caption").innerHTML='<span class="floatright"><input type="button" value="Use Libraries" onClick="document.getElementById(\'GB_frame\').contentWindow.setlib()" /> <span class="pointer" onclick="GB_hide()">[X]</span>&nbsp;</span>Select Libraries<div class="clear"></div>',a=self.innerHeight||l&&l.clientHeight||document.body.clientHeight):(document.getElementById("GB_caption").innerHTML='<span class="floatright"><span class="pointer" onclick="GB_hide()">[X]</span></span>'+
a,document.getElementById("GB_caption").onclick=GB_hide,a="auto"==f?self.innerHeight||l&&l.clientHeight||document.body.clientHeight:f);document.getElementById("GB_window").style.display="block";document.getElementById("GB_overlay").style.display="block";document.getElementById("GB_loading").style.display="block";var l=document.documentElement,l=self.innerWidth||l&&l.clientWidth||document.body.clientWidth;document.getElementById("GB_window").style.width=c+"px";document.getElementById("GB_window").style.height=
a-30+"px";document.getElementById("GB_window").style.left=(l-c)/2+"px";document.getElementById("GB_frame").style.height=a-30-34+"px"}function GB_doneload(){document.getElementById("GB_loading").style.display="none"}function GB_hide(){document.getElementById("GB_window").style.display="none";document.getElementById("GB_overlay").style.display="none"}
function chkAllNone(a,d,c,f){a=document.getElementById(a);for(i=0;i<=a.elements.length;i++)try{if("all"==d&&"checkbox"==a.elements[i].type||a.elements[i].name==d)a.elements[i].checked=f&&a.elements[i].className==f?!c:c}catch(h){}return!1}
function initeditor(a,d,c,f,h){c=c||0;f=f||0;var l="";"exact"==a?l="#"+d.split(/,/).join(",#"):"textareas"==a?l="textarea."+d:"divs"==a?l="div."+d:"selector"==a&&(l=d);a={selector:l,inline:f,plugins:["advlist attach image charmap anchor","searchreplace code link textcolor","media table paste asciimath asciisvg rollups"],menubar:!1,toolbar1:"myEdit myInsert styleselect | bold italic underline subscript superscript | forecolor backcolor | code | saveclose",toolbar2:" alignleft aligncenter alignright | bullist numlist outdent indent  | attach link unlink image | table | asciimath asciimathcharmap asciisvg",
extended_valid_elements:"iframe[src|width|height|name|align|allowfullscreen|frameborder],param[name|value],@[sscr]",content_css:imasroot+(1==c?"/assessment/mathtest.css,":"/imascore.css,")+imasroot+"/themes/"+coursetheme,AScgiloc:imasroot+"/filter/graph/svgimg.php",convert_urls:!1,file_picker_callback:filePickerCallBackFunc,file_browser_types:"file image",images_upload_url:imasroot+"/tinymce4/upload_handler.php",paste_data_images:!0,default_link_target:"_blank",browser_spellcheck:!0,resize:"both",
width:"100%",content_style:"body {background-color: #ffffff !important;}",table_class_list:[{title:"None",value:""},{title:"Gridded",value:"gridded"},{title:"Gridded Centered",value:"gridded centered"}],style_formats_merge:!0,style_formats:[{title:"Font Family",items:[{title:"Arial",inline:"span",styles:{"font-family":"arial"}},{title:"Book Antiqua",inline:"span",styles:{"font-family":"book antiqua"}},{title:"Comic Sans MS",inline:"span",styles:{"font-family":"comic sans ms,sans-serif"}},{title:"Courier New",
inline:"span",styles:{"font-family":"courier new,courier"}},{title:"Georgia",inline:"span",styles:{"font-family":"georgia,palatino"}},{title:"Helvetica",inline:"span",styles:{"font-family":"helvetica"}},{title:"Impact",inline:"span",styles:{"font-family":"impact,chicago"}},{title:"Open Sans",inline:"span",styles:{"font-family":"Open Sans"}},{title:"Symbol",inline:"span",styles:{"font-family":"symbol"}},{title:"Tahoma",inline:"span",styles:{"font-family":"tahoma"}},{title:"Terminal",inline:"span",
styles:{"font-family":"terminal,monaco"}},{title:"Times New Roman",inline:"span",styles:{"font-family":"times new roman,times"}},{title:"Verdana",inline:"span",styles:{"font-family":"Verdana"}}]},{title:"Font Size",items:[{title:"8pt",inline:"span",styles:{fontSize:"12px","font-size":"8px"}},{title:"10pt",inline:"span",styles:{fontSize:"12px","font-size":"10px"}},{title:"12pt",inline:"span",styles:{fontSize:"12px","font-size":"12px"}},{title:"14pt",inline:"span",styles:{fontSize:"12px","font-size":"14px"}},
{title:"16pt",inline:"span",styles:{fontSize:"12px","font-size":"16px"}},{title:"20pt",inline:"span",styles:{fontSize:"12px","font-size":"20px"}}]}]};385>document.documentElement.clientWidth?(a.toolbar1="myEdit myInsert styleselect | bold italic underline",a.toolbar2="bullist numlist outdent indent  | link image | asciimath asciisvg"):465>document.documentElement.clientWidth?(a.toolbar1="myEdit myInsert styleselect | bold italic underline forecolor",a.toolbar2="bullist numlist outdent indent  | link unlink image | asciimath asciisvg"):
575>document.documentElement.clientWidth&&(a.toolbar1="myEdit myInsert styleselect | bold italic underline subscript superscript | forecolor",a.toolbar2=" alignleft aligncenter | bullist numlist outdent indent  | link unlink image | asciimath asciimathcharmap asciisvg");h&&(a.setup=h);for(var m in tinymce.editors)tinymce.editors[m].remove();tinymce.init(a)}
function filePickerCallBack(a,d,c){d=imasroot+"/tinymce4/file_manager.php";switch(c.filetype){case "image":d+="?type=img";break;case "file":d+="?type=files"}tinyMCE.activeEditor.windowManager.open({file:d,title:"File Manager",width:350,height:450,resizable:"yes",inline:"yes",close_previous:"no"},{oninsert:function(d,c){a(d)}})}
function imascleanup(a,d){"get_from_editor"==a&&(d=d.replace(/\x3c!--([\s\S]*?)--\x3e|&lt;!--([\s\S]*?)--&gt;|<style>[\s\S]*?<\/style>/g,""),d=d.replace(/class="?Mso\w+"?/g,""),d=d.replace(/<p\s*>\s*<\/p>/gi,""),d=d.replace(/<script.*?\/script>/gi,""),d=d.replace(/<input[^>]*button[^>]*>/gi,""));return d}
function readCookie(a){a+="=";for(var d=document.cookie.split(";"),c=0;c<d.length;c++){for(var f=d[c];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return unescape(f.substring(a.length,f.length))}return null}
function selectByDivID(a){var d=a.value;a=a.value.split(":")[0];for(var c=document.getElementsByTagName("div"),f=0;f<c.length;f++)c[f].className.match(a)&&(c[f].style.display=c[f].id==d?"block":"none");c=new Date;c.setDate(c.getDate()+365);document.cookie=a+"store="+escape(d)+";expires="+c.toGMTString()}
function setselectbycookie(){for(var a=document.getElementsByTagName("select"),d=0;d<a.length;d++)if(a[d].className.match("alts")){var c=a[d].className.replace(/alts/,"").replace(/\s/g,"");null!=(co=readCookie(c+"store"))&&(co=co.replace("store",""),a[d].value=co,selectByDivID(a[d]))}}addLoadEvent(setselectbycookie);var recordedunload=!1;
function recclick(a,d,c,f){if(0<cid){var h="",l;null!==(l=window.location.href.match(/showlinkedtext.*?&id=(\d+)/))&&0==recordedunload&&(h="&unloadinglinked="+l[1],recordedunload=!0);jQuery.ajax({type:"POST",url:imasroot+"/course/rectrack.php?cid="+cid,data:"type="+encodeURIComponent(a)+"&typeid="+encodeURIComponent(d)+"&info="+encodeURIComponent(c+"::"+f)+h})}}
function setuptracklinks(a,d){jQuery(d).attr("data-base")&&jQuery(d).click(function(a){var f=jQuery(this).attr("data-base").split("-");recclick(f[0],f[1],jQuery(this).attr("href"),jQuery(this).text());if("undefined"==typeof jQuery(d).attr("target"))return a.preventDefault(),setTimeout('window.location.href = "'+jQuery(this).attr("href")+'"',100),!1}).mousedown(function(a){3==a.which&&(a=jQuery(this).attr("data-base").split("-"),recclick(a[0],a[1],jQuery(this).attr("href"),jQuery(this).text()))})}
var videoembedcounter=0;
function togglevideoembed(){var a=this.id.substr(13),d=jQuery("#videoiframe"+a);if(0<d.length)"none"==d.css("display")?(d.show(),d.parent(".fluid-width-video-wrapper").show(),jQuery(this).text(" [-]"),jQuery(this).attr("title",_("Hide video"))):(d.hide(),d.get(0).contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),d.parent(".fluid-width-video-wrapper").hide(),jQuery(this).text(" [+]"),jQuery(this).attr("title",_("Watch video here")));else{var d=jQuery(this).prev().attr("href"),
c="?";if(d.match(/youtube\.com/))if(-1<d.indexOf("playlist?list="))var f=d.split("list=")[1].split(/[#&]/)[0],h="www.youtube.com/embed/videoseries?list=",c="&";else f=d.split("v=")[1].split(/[#&]/)[0],h="www.youtube.com/embed/";else d.match(/youtu\.be/)?(f=d.split(".be/")[1].split(/[#&]/)[0],h="www.youtube.com/embed/"):d.match(/vimeo/)&&(f=d.split(".com/")[1].split(/[#&]/)[0],h="player.vimeo.com/video/");var l=d.match(/.*\Wt=((\d+)m)?((\d+)s)?.*/);null==l?(c+="rel=0",l=d.match(/.*start=(\d+)/),null!=
l&&(c+="&start="+l[1])):c=c+"rel=0&start="+((l[2]?60*l[2]:0)+(l[4]?1*l[4]:0));l=d.match(/.*end=(\d+)/);null!=l&&(c+="&end="+l[1]);jQuery("<iframe/>",{id:"videoiframe"+a,width:640,height:400,src:location.protocol+"//"+h+f+(c+"&enablejsapi=1"),frameborder:0,allowfullscreen:1}).insertAfter(jQuery(this));jQuery(this).parent().fitVids();jQuery("<br/>").insertAfter(jQuery(this));jQuery(this).text(" [-]");jQuery(this).attr("title",_("Hide video"));jQuery(this).prev().attr("data-base")&&(a=jQuery(this).prev().attr("data-base").split("-"),
recclick(a[0],a[1],d,jQuery(this).prev().text()))}}function setupvideoembeds(a,d){jQuery("<span/>",{text:" [+]",title:_("Watch video here"),id:"videoembedbtn"+videoembedcounter,click:togglevideoembed,"class":"videoembedbtn"}).insertAfter(d);videoembedcounter++}function addNoopener(a,d){!d.rel&&d.target&&d.host!==window.location.host&&d.setAttribute("rel","noopener noreferrer")}
function addmultiselect(a,d){var c=jQuery(a).parent(),f=jQuery("#"+d).val(),h=jQuery("#"+d+" option[value="+f+"]").prop("disabled",!0).html();"null"!=f&&c.append('<div class="multiselitem"><span class="right"><a href="#" onclick="removemultiselect(this);return false;">Remove</a></span><input type="hidden" name="'+d+'[]" value="'+f+'"/>'+h+"</div>");jQuery("#"+d).val("null")}
function removemultiselect(a){a=jQuery(a).parent().parent();var d=a.find("input").val();a.parent().find("option[value="+d+"]").prop("disabled",!1);a.remove()}function hidefromcourselist(a,d){confirm("Are you SURE you want to hide this course from your course list?")&&jQuery.ajax({type:"GET",url:imasroot+"/admin/hidefromcourselist.php?cid="+d}).done(function(d){"OK"==d&&(jQuery(a).parent().slideUp(),jQuery("#unhidelink").show())})}
function rotateimg(a){var d=$(a).data("rotation")?($(a).data("rotation")+90)%360:90;$(a).data("rotation",d).css({transform:"rotate("+d+"deg)"});90==d%180?(d=($(a).width()-$(a).height())/2,0<d&&$(a).parent().css({"padding-top":d,"padding-bottom":d})):$(a).parent().css({"padding-top":0,"padding-bottom":0})}
jQuery(document).ready(function(a){a(window).on("message",function(d){if(d.originalEvent.data.match(/lti\.frameResize/))for(var c=JSON.parse(d.originalEvent.data),f=document.getElementsByTagName("iframe"),h=0;h<f.length;h++)if(f[h].contentWindow===d.originalEvent.source){a(f[h]).height(c.height);break}})});
jQuery(document).ready(function(a){a("a").each(setuptracklinks).each(addNoopener);a('a[href*="youtu"]').each(setupvideoembeds);a('a[href*="vimeo"]').each(setupvideoembeds);a("body").fitVids();a('a[target="_blank"]').each(function(){this.href.match(/youtu/)||this.href.match(/vimeo/)||a(this).append(' <img src="'+imasroot+'/img/extlink.png"/>')})});
jQuery.fn.isolatedScroll=function(){this.bind("mousewheel DOMMouseScroll",function(a){var d=a.wheelDelta||a.originalEvent&&a.originalEvent.wheelDelta||-a.detail,c=0<=this.scrollTop+jQuery(this).outerHeight()-this.scrollHeight,f=0>=this.scrollTop;(0>d&&c||0<d&&f)&&a.preventDefault()});return this};
jQuery(document).ready(function(a){for(var d=a(".fixedonscroll"),c=[],f=0;f<d.length;f++)c[f]=a(d[f]).offset().top,a(d[f]).height()>a(window).height()&&(c[f]=-1);0<d.length&&"left"==a(d[0]).css("float")&&a(window).scroll(function(){for(var f=a(window).scrollTop(),l=0;l<d.length;l++)f>c[l]&&0<c[l]?a(d[l]).css("position","fixed").css("top","5px"):a(d[l]).css("position","static")})});
function _(a){var d="undefined"!=typeof i18njs&&i18njs[a]?i18njs[a]:a;if(1<arguments.length)for(var c=1;c<arguments.length;c++)d=d.replace("$"+c,arguments[c]);return d}
(function(a){a.fn.fitVids=function(){return this.each(function(){a(this).find("iframe[src*='player.vimeo.com'],iframe[src*='youtube.com'],iframe[src*='youtube-nocookie.com']").each(function(){var d=a(this);if(0<d.closest(".textsegment").length)return!0;d.parentsUntil(".intro","table").each(function(){a(this).css("width","100%")});var c=d.attr("height")&&!isNaN(parseInt(d.attr("height"),10))?parseInt(d.attr("height"),10):d.height(),f=isNaN(parseInt(d.attr("width"),10))?d.width():parseInt(d.attr("width"),
10),c=c/f;d.attr("id")||d.attr("id","fitvid"+Math.floor(999999*Math.random()));d.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*c+"%").wrap('<div class="video-wrapper-wrapper"></div>').parent(".video-wrapper-wrapper").css("max-width",f+"px");d.removeAttr("height").removeAttr("width").css("height","").css("width","")})})}})(window.jQuery||window.Zepto);
function setAltSelectors(a,d){console.log("looking for "+a);$(".alts."+a).parents(".altWrap").find(".altContentOn").removeClass("altContentOn").addClass("altContentOff");$(".alts."+a).parents(".altWrap").find("."+d).addClass("altContentOn").removeClass("altContentOff");$("select.alts."+a).val(a+":"+d);var c=new Date;c.setDate(c.getDate()+365);document.cookie="alt_store_"+a+"="+escape(d)+";expires="+c.toGMTString()+";path=/"}
jQuery(document).ready(function(a){a(".alts").on("change",function(){var a=this.value.split(":");1<a.length&&setAltSelectors(a[0],a[1])}).each(function(d,c){var f=c.value.split(":");null!=(co=readCookie("alt_store_"+f[0]))?setAltSelectors(f[0],co):a(c).hasClass("setDefault")&&setAltSelectors(f[0],f[1])});a(document).on("keydown",function(d){8!==d.which||a(d.target).is("input[type='text']:not([readonly]),input:not([type]):not([readonly]),input[type='password']:not([readonly]), textarea, [contenteditable='true']")||
d.preventDefault()})});
+function(a){function d(d){var c=d.attr("data-target");c||(c=(c=d.attr("href"))&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));return(c=c&&a(c))&&c.length?c:d.parent()}function c(c){c&&3===c.which||(a(".dropdown-backdrop").remove(),a('[data-toggle="dropdown"]').each(function(){var f=a(this),h=d(f),t={relatedTarget:this};!h.hasClass("open")||c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(h[0],c.target)||(h.trigger(c=a.Event("hide.bs.dropdown",t)),c.isDefaultPrevented()||
(f.attr("aria-expanded","false"),h.removeClass("open").trigger("hidden.bs.dropdown",t)))}))}var f=function(d){a(d).on("click.bs.dropdown",this.toggle)};f.VERSION="3.3.5";f.prototype.toggle=function(f){var h=a(this);if(!h.is(".disabled, :disabled")){var n=d(h);f=n.hasClass("open");c();if(!f){if("ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length)a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var t={relatedTarget:this};n.trigger(f=
a.Event("show.bs.dropdown",t));if(f.isDefaultPrevented())return;h.trigger("focus").attr("aria-expanded","true");n.toggleClass("open").trigger("shown.bs.dropdown",t)}return!1}};f.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var f=a(this);c.preventDefault();c.stopPropagation();if(!f.is(".disabled, :disabled")){var h=d(f),t=h.hasClass("open");if(!t&&27!=c.which||t&&27==c.which)return 27==c.which&&h.find('[data-toggle="dropdown"]').trigger("focus"),
f.trigger("click");f=h.find(".dropdown-menu li:not(.disabled):visible a");f.length&&(h=f.index(c.target),38==c.which&&0<h&&h--,40==c.which&&h<f.length-1&&h++,~h||(h=0),f.eq(h).trigger("focus"))}}};var h=a.fn.dropdown;a.fn.dropdown=function(d){return this.each(function(){var c=a(this),h=c.data("bs.dropdown");h||c.data("bs.dropdown",h=new f(this));"string"==typeof d&&h[d].call(c)})};a.fn.dropdown.Constructor=f;a.fn.dropdown.noConflict=function(){a.fn.dropdown=h;return this};a(document).on("click.bs.dropdown.data-api",
c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",'[data-toggle="dropdown"]',f.prototype.toggle).on("keydown.bs.dropdown.data-api",'[data-toggle="dropdown"]',f.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",f.prototype.keydown)}(jQuery);
var pi=Math.PI,ln=Math.log,e=Math.E,arcsin=Math.asin,arccos=Math.acos,arctan=Math.atan,sec=function(a){return 1/Math.cos(a)},csc=function(a){return 1/Math.sin(a)},cot=function(a){return 1/Math.tan(a)},arcsec=function(a){return arccos(1/a)},arccsc=function(a){return arcsin(1/a)},arccot=function(a){return arctan(1/a)},sinh=function(a){return(Math.exp(a)-Math.exp(-a))/2},cosh=function(a){return(Math.exp(a)+Math.exp(-a))/2},tanh=function(a){return(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))},
sech=function(a){return 1/cosh(a)},csch=function(a){return 1/sinh(a)},coth=function(a){return 1/tanh(a)},arcsinh=function(a){return ln(a+Math.sqrt(a*a+1))},arccosh=function(a){return ln(a+Math.sqrt(a*a-1))},arctanh=function(a){return ln((1+a)/(1-a))/2},sech=function(a){return 1/cosh(a)},csch=function(a){return 1/sinh(a)},coth=function(a){return 1/tanh(a)},arcsech=function(a){return arccosh(1/a)},arccsch=function(a){return arcsinh(1/a)},arccoth=function(a){return arctanh(1/a)},sign=function(a){return 0==
a?0:0>a?-1:1},logten=function(a){return Math.LOG10E*Math.log(a)},sinn=function(a,d){return Math.pow(Math.sin(d),a)},cosn=function(a,d){return Math.pow(Math.cos(d),a)},tann=function(a,d){return Math.pow(Math.tan(d),a)},cscn=function(a,d){return 1/Math.pow(Math.sin(d),a)},secn=function(a,d){return 1/Math.pow(Math.cos(d),a)},cotn=function(a,d){return 1/Math.pow(Math.tan(d),a)};function factorial(a,d){null==d&&(d=1);for(var c=a-d;0<c;c-=d)a*=c;return 0>a?NaN:0==a?1:a}
function C(a,d){for(var c=1,f=0;f<d;f++)c*=(a-f)/(d-f);return c}function matchtolower(a){return a.toLowerCase()}function nthroot(a,d){return safepow(d,1/a)}function nthlogten(a,d){return Math.log(d)/Math.log(a)}var funcstoindexarr="sinh cosh tanh sech csch coth sqrt ln log sin cos tan sec csc cot abs root arcsin arccos arctan arcsec arccsc arccot arcsinh arccosh arctanh arcsech arccsch arccoth".split(" ");
function functoindex(a){for(var d=0;d<funcstoindexarr.length;d++)if(funcstoindexarr[d]==a)return"@"+d+"@"}function indextofunc(a,d){return funcstoindexarr[d]}function safepow(a,d){if(0>a&&Math.floor(d)!=d){for(var c=3;50>c;c+=2)if(1E-6>Math.abs(Math.round(c*d)-c*d))return 0==Math.round(c*d)%2?Math.pow(Math.abs(a),d):-1*Math.pow(Math.abs(a),d);return Math.sqrt(-1)}return Math.pow(a,d)}
function mathjs(a,d){a=a.replace("[","(");a=a.replace("]",")");a=a.replace(/root\s*(\d+)/,"root($1)");a=a.replace(/arc(sin|cos|tan|sec|csc|cot|sinh|cosh|tanh|sech|csch|coth)/gi,"$1^-1");a=a.replace(/(Sin|Cos|Tan|Sec|Csc|Cot|Arc|Abs|Log|Ln|Sqrt)/gi,matchtolower);if(null!=d){var c=d.split("|");a=a.replace(/(sinh|cosh|tanh|sech|csch|coth|sqrt|ln|log|sin|cos|tan|sec|csc|cot|abs|root)/g,functoindex);var f=RegExp("(sqrt|ln|log|sin|cos|tan|sec|csc|cot|abs|root)[(]","g");a=a.replace(f,"$1#(");f=new RegExp("("+
d+")("+d+")$","g");a=a.replace(f,"($1)($2)");f=new RegExp("("+d+")(a#|sqrt|ln|log|sin|cos|tan|sec|csc|cot|abs|root)","g");a=a.replace(f,"($1)$2");f=new RegExp("("+d+")("+d+")([^a-df-zA-Z#])","g");a=a.replace(f,"($1)($2)$3");f=new RegExp("([^a-df-zA-Z#])("+d+")([^a-df-zA-Z#])","g");a=a.replace(f,"$1($2)$3");f=new RegExp("([^a-df-zA-Z#(])("+d+")([^a-df-zA-Z#)])","g");a=a.replace(f,"$1($2)$3");f=new RegExp("^("+d+")([^a-df-zA-Z])","g");a=a.replace(f,"($1)$2");f=new RegExp("([^a-df-zA-Z])("+d+")$","g");
a=a.replace(f,"$1($2)");a=a.replace(new RegExp("(("+d+"))","g"),function(a){for(var d=0;d<c.length;d++)if(c[d]==a)return"(@v"+d+"@)"});a=a.replace(/@(\d+)@/g,indextofunc)}a=a.replace(/([0-9])\s+([0-9])/g,"$1*$2");a=a.replace(/#/g,"");a=a.replace(/\s/g,"");a=a.replace(/log_([a-zA-Z\d\.]+)\(/g,"nthlog($1,");a=a.replace(/log_\(([a-zA-Z\/\d\.]+)\)\(/g,"nthlog($1,");a=a.replace(/log/g,"logten");-1!=a.indexOf("^-1")&&(a=a.replace(/sin\^-1/g,"arcsin"),a=a.replace(/cos\^-1/g,"arccos"),a=a.replace(/tan\^-1/g,
"arctan"),a=a.replace(/sec\^-1/g,"arcsec"),a=a.replace(/csc\^-1/g,"arccsc"),a=a.replace(/cot\^-1/g,"arccot"),a=a.replace(/sinh\^-1/g,"arcsinh"),a=a.replace(/cosh\^-1/g,"arccosh"),a=a.replace(/tanh\^-1/g,"arctanh"),a=a.replace(/sech\^-1/g,"arcsech"),a=a.replace(/csch\^-1/g,"arccsch"),a=a.replace(/coth\^-1/g,"arccoth"));a=a.replace(/(sin|cos|tan|sec|csc|cot)\^(\d+)\(/g,"$1n($2,");a=a.replace(/root\((\d+)\)\(/g,"nthroot($1,");a=a.replace(/([0-9])E([\-0-9])/g,"$1(EE)$2");a=a.replace(/^e$/g,"(E)");a=a.replace(/pi/g,
"(pi)");a=a.replace(/@v(\d+)@/g,function(a,d){return c[d]});a=a.replace(/^e([^a-zA-Z])/g,"(E)$1");a=a.replace(/([^a-zA-Z])e$/g,"$1(E)");a=a.replace(/([^a-zA-Z])e(?=[^a-zA-Z])/g,"$1(E)");a=a.replace(/([0-9])([\(a-zA-Z])/g,"$1*$2");a=a.replace(/(!)([0-9\(])/g,"$1*$2");a=a.replace(/([0-9])\*\(EE\)([\-0-9])/,"$1e$2");a=a.replace(/\)([\(0-9a-zA-Z]|\.\d+)/g,")*$1");for(var h,l,m,n;-1!=(f=a.indexOf("^"));){if(0==f)return"Error: missing argument";h=f-1;m=a.charAt(h);if("0"<=m&&"9">=m){for(h--;0<=h&&"0"<=
(m=a.charAt(h))&&"9">=m;)h--;if("."==m)for(h--;0<=h&&"0"<=(m=a.charAt(h))&&"9">=m;)h--}else if(")"==m){n=1;for(h--;0<=h&&0<n;)m=a.charAt(h),"("==m?n--:")"==m&&n++,h--;for(;0<=h&&("a"<=(m=a.charAt(h))&&"z">=m||"A"<=m&&"Z">=m);)h--}else if("a"<=m&&"z">=m||"A"<=m&&"Z">=m)for(h--;0<=h&&("a"<=(m=a.charAt(h))&&"z">=m||"A"<=m&&"Z">=m);)h--;else return"Error: incorrect syntax in "+a+" at position "+h;if(f==a.length-1)return"Error: missing argument";l=f+1;m=a.charAt(l);nch=a.charAt(l+1);if("0"<=m&&"9">=m||
"-"==m&&"("!=nch||"."==m){for(l++;l<a.length&&"0"<=(m=a.charAt(l))&&"9">=m;)l++;if("."==m)for(l++;l<a.length&&"0"<=(m=a.charAt(l))&&"9">=m;)l++}else if("("==m||"-"==m&&"("==nch)for("-"==m&&l++,n=1,l++;l<a.length&&0<n;)m=a.charAt(l),"("==m?n++:")"==m&&n--,l++;else if("a"<=m&&"z">=m||"A"<=m&&"Z">=m){for(l++;l<a.length&&("a"<=(m=a.charAt(l))&&"z">=m||"A"<=m&&"Z">=m);)l++;if("("==m&&a.slice(f+1,l).match(/^(sin|cos|tan|sec|csc|cot|logten|log|ln|exp|arcsin|arccos|arctan|arcsec|arccsc|arccot|sinh|cosh|tanh|sech|csch|coth|arcsinh|arccosh|arctanh|arcsech|arccsch|arccoth|sqrt|abs|nthroot)$/))for(n=
1,l++;l<a.length&&0<n;)m=a.charAt(l),"("==m?n++:")"==m&&n--,l++}else return"Error: incorrect syntax in "+a+" at position "+l;a=a.slice(0,h+1)+"safepow("+a.slice(h+1,f)+","+a.slice(f+1,l)+")"+a.slice(l)}for(;-1!=(f=a.indexOf("!"));){if(0==f)return"Error: missing argument";h=f-1;m=a.charAt(h);if("0"<=m&&"9">=m){for(h--;0<=h&&"0"<=(m=a.charAt(h))&&"9">=m;)h--;if("."==m)for(h--;0<=h&&"0"<=(m=a.charAt(h))&&"9">=m;)h--}else if(")"==m){n=1;for(h--;0<=h&&0<n;)m=a.charAt(h),"("==m?n--:")"==m&&n++,h--;for(;0<=
h&&("a"<=(m=a.charAt(h))&&"z">=m||"A"<=m&&"Z">=m);)h--}else if("a"<=m&&"z">=m||"A"<=m&&"Z">=m)for(h--;0<=h&&("a"<=(m=a.charAt(h))&&"z">=m||"A"<=m&&"Z">=m);)h--;else return"Error: incorrect syntax in "+a+" at position "+h;a=a.slice(0,h+1)+"factorial("+a.slice(h+1,f)+")"+a.slice(f+1)}return a}var updateeeddpos=function(){},updateehpos=function(){},LivePreviews=[];
function setupLivePreview(a){LivePreviews.hasOwnProperty(a)||("MathJax"==mathRenderer||"Katex"==mathRenderer?(LivePreviews[a]={delay:"MathJax"==mathRenderer?100:20,finaldelay:1E3,preview:null,buffer:null,timeout:null,finaltimeout:null,mjRunning:!1,mjPending:!1,oldText:null,Init:function(){$("#p"+a).css("positive","relative").append('<span id="lpbuf1'+a+'" style="visibility:hidden;position:absolute;"></span>').append('<span id="lpbuf2'+a+'" style="visibility:hidden;position:absolute;"></span>');this.preview=
document.getElementById("lpbuf1"+a);this.buffer=document.getElementById("lpbuf2"+a)},SwapBuffers:function(){var a=this.preview,c=this.buffer;this.buffer=a;this.preview=c;a.style.visibility="hidden";a.style.position="absolute";c.style.position="";c.style.visibility=""},Update:function(a){this.timeout&&clearTimeout(this.timeout);this.finaltimeout&&clearTimeout(this.finaltimeout);this.timeout=setTimeout(this.callback,this.delay);this.finaltimeout=setTimeout(this.DoFinalPreview,this.finaldelay)},RenderNow:function(a){this.buffer.innerHTML=
this.oldtext=a;this.mjRunning=!0;this.RenderBuffer()},RenderBuffer:function(){"MathJax"==mathRenderer?MathJax.Hub.Queue(["Typeset",MathJax.Hub,this.buffer],["PreviewDone",this]):"Katex"==mathRenderer&&(renderMathInElement(this.buffer),0<$(this.buffer).children(".mj").length?MathJax.Hub.Queue(["PreviewDone",this]):this.PreviewDone())},DoFinalPreview:function(){$("#pbtn"+a).trigger("click")},preformat:function(d){if(intcalctoproc.hasOwnProperty(a))calcformat[a].match(/inequality/)?(d=d.replace("<=",
"le").replace(">=","ge").replace("<","lt").replace(">","gt"),d.match(/all\s*real/i)&&(d="text("+d+")")):d=d.replace(/U/g,"uu");else if(vlist.hasOwnProperty(a))d=AMnumfuncPrepVar(a,d)[1];else if(calcformat.hasOwnProperty(a)){var c=calcformat[a];-1==c.indexOf("list")&&-1==c.indexOf("set")&&(d=d.replace(/(\d)\s*,\s*(?=\d{3}\b)/g,"$1"))}return d},CreatePreview:function(){this.timeout=null;if(!this.mjPending){var d=null==document.getElementById("tc"+a)?document.getElementById("qn"+a).value:document.getElementById("tc"+
a).value;d!==this.oldtext&&(this.mjRunning?(this.mjPending=!0,MathJax.Hub.Queue(["CreatePreview",this])):(this.oldtext=d,this.buffer.innerHTML="`"+this.preformat(d)+"`",this.mjRunning=!0,this.RenderBuffer()))}},PreviewDone:function(){this.mjRunning=this.mjPending=!1;this.SwapBuffers();updateeeddpos();updateehpos()}},LivePreviews[a].callback=MathJax.Callback(["CreatePreview",LivePreviews[a]]),LivePreviews[a].callback.autoReset=!0,LivePreviews[a].Init()):LivePreviews[a]={finaldelay:1E3,finaltimeout:null,
Update:function(a){this.finaltimeout&&clearTimeout(this.finaltimeout);this.finaltimeout=setTimeout(this.DoFinalPreview,this.finaldelay)},RenderNow:function(d){var c=document.getElementById("p"+a);c.innerHTML=d;rendermathnode(c)},DoFinalPreview:function(){$("#pbtn"+a).trigger("click")}})}function updateLivePreview(a){a=a.id.substr(2);setupLivePreview(a);LivePreviews[a].Update()}
function normalizemathunicode(a){a=a.replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F]/g,"");a=a.replace(/\u2013|\u2014|\u2015|\u2212/g,"-");a=a.replace(/\u2044|\u2215/g,"/");a=a.replace(/\u221e/g,"oo").replace(/\u2264/g,"<=").replace(/\u2265/g,">=").replace(/\u222a/g,"U");a=a.replace(/\u00b1/g,"+-").replace(/\u00f7/g,"/").replace(/\u00b7|\u2715|\u00d7|\u22c5/g,"*");a=a.replace(/\u221a/g,"sqrt").replace(/\u221b/g,"root(3)");a=a.replace(/\u00b2/g,"^2").replace(/\u00b3/g,"^3");a=a.replace(/\bOO\b/i,"oo");a=
a.replace(/\u03b8/,"theta").replace(/\u03c6/,"phi").replace(/\u03c0/,"pi").replace(/\u03c3/,"sigma").replace(/\u03bc/,"mu");a=a.replace(/\u03b1/,"alpha").replace(/\u03b2/,"beta").replace(/\u03b3/,"gamma").replace(/\u03b4/,"delta").replace(/\u03b5/,"epsilon").replace(/\u03ba/,"kappa");a=a.replace(/\u03bb/,"lambda").replace(/\u03c1/,"rho").replace(/\u03c4/,"tau").replace(/\u03c7/,"chi").replace(/\u03c9/,"omega");return a=a.replace(/\u03a9/,"Omega").replace(/\u0393/,"Gamma").replace(/\u03a6/,"Phi").replace(/\u0394/,
"Delta").replace(/\u03a3/,"Sigma")}function wrapAMnotice(a){return'<span class="AMHnotice">'+a+"</span>"}
function calculate(a,d,c){var f=document.getElementById(a).value,f=normalizemathunicode(f),f=f.replace(/=/,"");if(-1!=c.indexOf("list"))var h=f.split(/,/);else-1!=c.indexOf("set")?h=f.replace(/[\{\}]/g,"").split(/,/):(h=[],h[0]=f);for(f=0;f<h.length;f++){str=h[f];str=str.replace(/(\d)\s*,\s*(?=\d{3}\b)/g,"$1");var l="";if(str.match(/DNE/i))str=str.toUpperCase();else if(str.match(/oo$/)||str.match(/oo\W/))str="`"+str+"`";else{l+=singlevalsyntaxcheck(str,c);str.match(/,/)&&(l+=_("Invalid use of a comma."));
-1!=c.indexOf("allowxtimes")&&(str=str.replace(/(x|X|\u00D7)/,"*"));-1!=c.indexOf("mixed")?str=str.replace(/_/," "):-1!=c.indexOf("scinot")?str=str.replace(/(x|X|\u00D7)/,"xx"):(str=str.replace(/([0-9])\s+([0-9])/g,"$1*$2"),str=str.replace(/\s/g,""));l+=syntaxcheckexpr(str,c);try{var m=str,m=m.replace(",","*NaN*");m.match(/^\s*[+-]?\s*((\d+(\.\d*)?)|(\.\d+))\s*%\s*$/)&&(m=m.replace(/%/,"")+"/100");-1!=c.indexOf("mixed")&&(m=m.replace(/(\d+)\s+(\d+\s*\/\s*\d+)/,"($1+$2)"));-1!=c.indexOf("scinot")&&
(m=m.replace("xx","*"));with(Math)var n=eval(mathjs(m))}catch(t){l=_("syntax incomplete")+". "+l,n=NaN}isNaN(n)||"Infinity"==n?""!=str&&(str="`"+str+"` = "+_("undefined")+". "+wrapAMnotice(l)):str=-1!=c.indexOf("fraction")||-1!=c.indexOf("reducedfraction")||-1!=c.indexOf("mixednumber")||-1!=c.indexOf("scinot")||-1!=c.indexOf("noval")?"`"+str+"` "+wrapAMnotice(l):"`"+str+" =` "+(1E-15>Math.abs(n)?0:n)+". "+wrapAMnotice(l)}h[f]=str+" "}f=h.join(", ");-1!=c.indexOf("set")&&(f=document.getElementById(a).value.match(/^\s*{.*?}\s*$/)?
"{"+f+"}":f+wrapAMnotice(_("syntax error: this answer must be in set notation, a list wrapped in braces like {1,2,3}")));a=d.substr(1);setupLivePreview(a);LivePreviews[a].RenderNow(f)}
function ineqtointerval(a){a=a.replace(/(\d)\s*,\s*(?=\d{3}\b)/g,"$1");a=a.split(/or/);for(i=0;i<a.length;i++){str=a[i];var d="";(pat=str.match(/^([^<]+)\s*(<=?)\s*([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+)\s*(<=?)([^<]+)$/))?(d="<="==pat[2]?d+"[":d+"(",d+=pat[1]+","+pat[5],d="<="==pat[4]?d+"]":d+")"):(pat=str.match(/^([^>]+)\s*(>=?)\s*([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+)\s*(>=?)([^>]+)$/))?(d=">="==pat[4]?d+"[":d+"(",d+=pat[5]+","+pat[1],d=">="==pat[2]?d+"]":d+")"):(pat=str.match(/^([^><]+)\s*([><]=?)\s*([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+)\s*$/))?
">"==pat[2]?d="(-oo,"+pat[1]+")":">="==pat[2]?d="(-oo,"+pat[1]+"]":"<"==pat[2]?d="("+pat[1]+",oo)":"<="==pat[2]&&(d="["+pat[1]+",oo)"):(pat=str.match(/^\s*([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+)\s*([><]=?)\s*([^><]+)$/))?"<"==pat[2]?d="(-oo,"+pat[3]+")":"<="==pat[2]?d="(-oo,"+pat[3]+"]":">"==pat[2]?d="("+pat[3]+",oo)":">="==pat[2]&&(d="["+pat[3]+",oo)"):d=str.match(/all\s*real/i)?"(-oo,oo)":"";a[i]=d}return d=a.join("U")}
function intcalculate(a,d,c){a=document.getElementById(a).value;a=normalizemathunicode(a);if(a.match(/DNE/i))a=a.toUpperCase();else if(""==a.replace(/\s+/g,""))a=_("no answer given");else{var f=[],h=[];if(-1!=c.indexOf("inequality")){var l=a=a.replace(/or/g," or ");a=ineqtointerval(a);var m=str.match(/\b([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+\b)/),n=str.match(/([a-zA-Z]\(\s*[a-zA-Z]\s*\)|[a-zA-Z]+)/),m=null!=m?m[1]:null!=n?n[1]:""}else l=a,a=a.replace(/\s+/g,"");if(-1!=c.indexOf("list")){for(var t=
0,n=[],z=1;z<a.length-1;z++)","!=a.charAt(z)||")"!=a.charAt(z-1)&&"]"!=a.charAt(z-1)||"("!=a.charAt(z+1)&&"["!=a.charAt(z+1)||(n.push(a.substring(t,z)),t=z+1);n.push(a.substring(t))}else n=a.split(/U/i);t=!0;z="";for(i=0;i<n.length;i++){str=n[i];sm=str.charAt(0);em=str.charAt(str.length-1);vals=str.substring(1,str.length-1);vals=vals.split(/,/);if(2!=vals.length||"("!=sm&&"["!=sm||")"!=em&&"]"!=em){-1!=c.indexOf("inequality")?(l=l.replace("<=","le").replace(">=","ge").replace("<","lt").replace(">",
"gt"),a="`"+l+"`: "+wrapAMnotice(_("invalid inequality notation"))):a="`"+l.replace(/U/g,"uu")+"`: "+wrapAMnotice(_("invalid interval notation"));t=!1;break}for(j=0;2>j;j++)if(vals[j].match(/oo$/)||vals[j].match(/oo\W/))f[j]=vals[j];else{var A="",I=NaN,A=A+singlevalsyntaxcheck(vals[j],c);-1!=c.indexOf("mixed")?vals[j]=vals[j].replace(/_/," "):vals[j]=vals[j].replace(/\s/g,"");A+=syntaxcheckexpr(vals[j],c);if(""==A)try{with(Math)var I=eval(mathjs(vals[j]))}catch(Z){A=_("syntax incomplete")+". "}isNaN(I)||
"Infinity"==I?f[j]=_("undefined"):(vals[j]=vals[j],f[j]=(1E-15>Math.abs(I)?0:I).toString());""!=A&&(z+=A)}n[i]=sm+vals[0]+","+vals[1]+em;-1!=c.indexOf("inequality")?(f[0].match(/oo/)?f[1].match(/oo/)?h[i]="RR":h[i]=m+("]"==em?"le":"lt")+f[1]:f[1].match(/oo/)?h[i]=m+("["==sm?"ge":"gt")+f[0]:h[i]=f[0]+("["==sm?"le":"lt")+m+("]"==em?"le":"lt")+f[1],h[i]=h[i].replace("undefined",'"undefined"')):h[i]=sm+f[0]+","+f[1]+em}t&&(-1!=c.indexOf("inequality")?l.match(/all\s*real/)?a=l:(l=l.replace(/or/g,' \\ "or" \\ '),
l=l.replace(/<=/g,"le"),l=l.replace(/>=/g,"ge"),l=l.replace(/</g,"lt"),l=l.replace(/>/g,"gt"),a=-1!=c.indexOf("fraction")||-1!=c.indexOf("reducedfraction")||-1!=c.indexOf("mixednumber")||-1!=c.indexOf("scinot")||-1!=c.indexOf("noval")?"`"+l+"`. "+wrapAMnotice(z):"`"+l+"= "+h.join(' \\ "or" \\ ')+"`. "+wrapAMnotice(z)):a=-1!=c.indexOf("fraction")||-1!=c.indexOf("reducedfraction")||-1!=c.indexOf("mixednumber")||-1!=c.indexOf("scinot")||-1!=c.indexOf("noval")?"`"+n.join("uu")+"`. "+wrapAMnotice(z):-1!=
c.indexOf("list")?"`"+n.join(",")+"` = "+h.join(" , ")+". "+wrapAMnotice(z):"`"+n.join("uu")+"` = "+h.join(" U ")+". "+wrapAMnotice(z))}d=d.substr(1);setupLivePreview(d);LivePreviews[d].RenderNow(a)}
function ntuplecalc(a,d,c){var f=document.getElementById(a).value,f=normalizemathunicode(f),f=f.replace(/\s+/g,"");if(f.match(/DNE/i))f.toUpperCase(),outstr=a="DNE";else{a="";var h=0,l=0,m="",n=!0;f.charAt(0).match(/[\(\[\<\{]/)||(n=!1);for(var t=0;t<f.length;t++)if(dec=!1,0==h&&(a+=f.charAt(t),l=t+1,","==f.charAt(t)&&(f.charAt(t+1).match(/[\(\[\<\{]/)&&f.charAt(t-1).match(/[\)\]\>\}]/)||(n=!1))),f.charAt(t).match(/[\(\[\<\{]/)?h++:f.charAt(t).match(/[\)\]\>\}]/)&&(h--,dec=!0),0==h&&dec||1==h&&","==
f.charAt(t)){sub=f.substring(l,t);l=NaN;try{with(Math)l=eval(mathjs(sub))}catch(z){m+=_("syntax incomplete")+". "}m+=singlevalsyntaxcheck(sub,c);sub=-1!=c.indexOf("mixed")?sub.replace(/_/," "):sub.replace(/\s/g,"");m+=syntaxcheckexpr(sub,c);a=isNaN(l)||"Infinity"==l?a+_("undefined"):a+l;a+=f.charAt(t);l=t+1}0!=h&&(n=!1);0==n&&(m+=_("Invalid notation")+". ");outstr=-1!=c.indexOf("fraction")||-1!=c.indexOf("reducedfraction")||-1!=c.indexOf("mixednumber")||-1!=c.indexOf("scinot")||-1!=c.indexOf("noval")||
0==n?"`"+f+"`. "+wrapAMnotice(m):"`"+f+"` = "+a+". "+wrapAMnotice(m)}null!=d&&(d=d.substr(1),setupLivePreview(d),LivePreviews[d].RenderNow(outstr));return a}
function complexcalc(a,d,c){var f=document.getElementById(a).value,f=normalizemathunicode(f),f=f.replace(/\s+/g,"");if(f.match(/DNE/i))f.toUpperCase(),outstr=a="DNE";else{for(var h=a="",l=f.split(","),m=0;m<l.length;m++){var n=mathjs(l[m],"i");if(-1==c.indexOf("sloppycomplex"))var t=parsecomplex(l[m]),h=h+singlevalsyntaxcheck(t[0],c),h=h+singlevalsyntaxcheck(t[1],c);h+=syntaxcheckexpr(l[m],c);try{with(Math)var z=scopedeval("var i=0;"+n);with(Math)var A=scopedeval("var i=1;"+n)}catch(I){h+=_("syntax incomplete")}if("synerr"==
z||"synerr"==A)h+=_("syntax incomplete"),z=NaN;if(isNaN(z)||"Infinity"==z||isNaN(A)||"Infinity"==A){a+=_("undefined");break}else A-=z,0!=m&&(a+=","),a+=z+(0<=A?"+":"")+A+"i"}outstr=-1!=c.indexOf("fraction")||-1!=c.indexOf("reducedfraction")||-1!=c.indexOf("mixednumber")||-1!=c.indexOf("scinot")||-1!=c.indexOf("noval")?"`"+f+"`. "+wrapAMnotice(h):"`"+f+"` = "+a+". "+wrapAMnotice(h)}null!=d&&(d=d.substr(1),setupLivePreview(d),LivePreviews[d].RenderNow(outstr));return a}
function parsecomplex(a){var d,c,f,h,l;a=a.replace(/\s/,"");a=a.replace(/sin/,"s$n");a=a.replace(/pi/,"p$");var m=a.length;if(2<a.split("i").length)return _("error - more than 1 i in expression");f=a.indexOf("i");if(-1==f)d="0";else{c=0;for(l=f-1;0<l;l--)if(d=a.charAt(l),")"==d)c++;else if("("==d)c--;else if(("+"==d||"-"==d)&&0==c)break;c=0;for(h=f+1;h<m;h++)if(d=a.charAt(h),"("==d)c++;else if(")"==d)c--;else if(("+"==d||"-"==d)&&0==c)break;if(1<f-l&&1<h-f)return _("error - invalid form");if(1<f-
l)d=a.substr(l,f-l),a=a.substr(0,l)+a.substr(f+1);else if(1<h-f)if(0<f){if("+"!=a.charAt(f-1)&&"-"!=a.charAt(f-1))return _("error - invalid form");d=a.charAt(f-1)+a.substr(f+1+("*"==a.charAt(f+1)?1:0),h-f-1);a=a.substr(0,f-1)+a.substr(h)}else d=a.substr(f+1,h-f-1),a=a.substr(0,f)+a.substr(h);else d="+"==a.charAt(l)?"1":"-"==a.charAt(l)?"-1":0==f?"1":a.charAt(l),a=(0<f?a.substr(0,l):"")+a.substr(f+1);""==a&&(a="0");"/"==d.charAt(0)?d="1"+d:"+"!=d.charAt(0)&&"-"!=d.charAt(0)||"/"!=d.charAt(1)||(d=d.charAt(0)+
"1"+d.substr(1));"*"==d.charAt(d.length-1)&&(d=d.substr(0,d.length-1));"+"==d.charAt(0)&&(d=d.substr(1));"+"==a.charAt(0)&&(a=a.substr(1))}a=a.replace("s$n","sin");a=a.replace("p$","pi");d=d.replace("s$n","sin");d=d.replace("p$","pi");return[a,d]}
function matrixcalc(a,d,c,f){function h(a){var d="";try{with(Math)var c=eval(mathjs(a))}catch(f){d=_("syntax incomplete")}isNaN(c)||"Infinity"==c?""!=a&&(a=_("undefined")):a=(1E-15>Math.abs(c)?0:c)+d;return a}if(null!=c&&null!=f){for(var l=0,m="[",n="[",t=0;t<c;t++){0<t&&(m+=",",n+=",");for(var m=m+"(",n=n+"(",z=0;z<f;z++)0<z&&(m+=",",n+=","),val=normalizemathunicode(document.getElementById(a+"-"+l).value),m+=val,n+=h(val),l++;m+=")";n+=")"}m+="]";n+="]"}else{m=normalizemathunicode(document.getElementById(a).value);
f=0;n=m.replace("[","(");n=n.replace("]",")");n=n.replace(/\s+/g,"");c=[];n=n.substring(1,n.length-1);for(a=l=0;a<n.length;a++)"("==n.charAt(a)?f++:")"==n.charAt(a)?f--:","==n.charAt(a)&&0==f&&(c[c.length]=n.substring(l+1,a-1),l=a+1);c[c.length]=n.substring(l+1,n.length-1);for(a=0;a<c.length;a++){calclist2=c[a].split(",");for(n=0;n<calclist2.length;n++)calclist2[n]=h(calclist2[n]);c[a]=calclist2.join(",")}n="[("+c.join("),(")+")]"}m="`"+m+"` = `"+n+"`";if(null!=d){d=document.getElementById(d);c=d.childNodes.length;
for(a=0;a<c;a++)d.removeChild(d.firstChild);d.appendChild(document.createTextNode(m));noMathRender||rendermathnode(d)}return n}function mathjsformat(a,d){var c=document.getElementById(a).value;document.getElementById(d).value=mathjs(c)}function stringqpreview(a,d){var c=document.getElementById(a).value,f=d.substr(1);setupLivePreview(f);LivePreviews[f].RenderNow("`"+c+"`")}
function AMnumfuncPrepVar(a,d){var c=vlist[a].split("|");d=d.replace(/,/g,"");d=normalizemathunicode(d);var f=[],h;h=d.replace(/(arcsinh|arccosh|arctanh|arcsech|arccsch|arccoth|arcsin|arccos|arctan|arcsec|arccsc|arccot|sinh|cosh|tanh|sech|csch|coth|sqrt|ln|log|sin|cos|tan|sec|csc|cot|abs|root)/g,functoindex);for(var l=0;l<c.length;l++)if("varE"==c[l])d=d.replace("E","varE"),h=h.replace("E","varE");else{f[l]=!1;for(var m=0;m<c.length;m++)if(l!=m&&c[m].toLowerCase()==c[l].toLowerCase()&&c[m]!=c[l]){f[l]=
!0;break}f[l]||(d=d.replace(new RegExp(c[l],"gi"),c[l]),h=h.replace(new RegExp(c[l],"gi"),c[l]))}for(var m=[],n,l=0;l<c.length;l++)if(1<c[l].length)if(n=!1,-1!=arraysearch(c[l].toLowerCase(),greekletters)&&(n=!0),c[l].match(/^\w+_\w+$/)){n=f[l]?"g":"gi";var t=(new RegExp(/^(\w+)_(\w+)$/,n)).exec(c[l]),z=new RegExp(t[1]+"_\\("+t[2]+"\\)",n);h=h.replace(z,c[l]);d=d.replace(z,c[l]);1<t[1].length&&-1==arraysearch(t[1].toLowerCase(),greekletters)&&(t[1]='"'+t[1]+'"');1<t[2].length&&-1==arraysearch(t[2].toLowerCase(),
greekletters)&&(t[2]='"'+t[2]+'"');h=h.replace(new RegExp(t[0],n),t[1]+"_"+t[2]);d=d.replace(new RegExp(t[0],"g"),"repvars"+l);c[l]="repvars"+l}else n||"varE"==c[l]||m.push(c[l]);0<m.length&&(vltq=m.join("|"),h=h.replace(new RegExp("("+vltq+")","g"),'"$1"'));h=h.replace("varE","E");h=h.replace(/@(\d+)@/g,indextofunc);return[d,h,c.join("|")]}
function AMpreview(a,d){var c=a.slice(2),f=AMnumfuncPrepVar(c,document.getElementById(a).value),h=f[0],l=f[1],m=f[2],n=flist[c];ptlist=pts[c].split(",");var t="",z=0,f=NaN,A=!1;1==iseqn[c]?(h.match(/=/)?1<h.match(/=/g).length&&(A=!0):A=!0,h=h.replace(/(.*)=(.*)/,"$1-($2)")):h.match(/=/)||(A=!0);""!=n&&(reg=new RegExp("("+n+")\\(","g"),h=h.replace(reg,"$1*sin($1+"));vars=m.split("|");for(n=mathjs(h,m);z<ptlist.length&&(isNaN(f)||"Infinity"==f);){var I="";testvals=ptlist[z].split("~");for(t=0;t<vars.length;t++)I+=
"var "+vars[t]+"="+testvals[t]+";";I+=n;t=_("syntax ok");try{with(Math)f=scopedeval(I)}catch(Z){t=_("syntax error")}"synerr"==f&&(t=_("syntax error"));z++}h=syntaxcheckexpr(h,"",m);if(isNaN(f)||"Infinity"==f)t=_("syntax error");""!=h&&(t=t==_("syntax ok")?t+(". "+_("warning")+": "+h):t+(". "+h));1==iseqn[c]&&A?t=_("syntax error: this is not an equation"):"undefined"!==typeof iseqn[c]||A||(t=_("syntax error: you gave an equation, not an expression"));c=d.substr(1);setupLivePreview(c);LivePreviews[c].RenderNow("`"+
l+"` "+wrapAMnotice(t))}function AMmathpreview(a,d){for(var c=document.getElementById(a).value,f=document.getElementById(d),h=f.childNodes.length,l=0;l<h;l++)f.removeChild(f.firstChild);f.appendChild(document.createTextNode("`"+c+"`"));noMathRender||rendermathnode(f)}
function singlevalsyntaxcheck(a,d){if(!a.match(/DNE/i)&&!a.match(/oo$/)&&!a.match(/oo\W/))if(-1!=d.indexOf("fraction")||-1!=d.indexOf("reducedfraction")){if(a=a.replace(/\s/g,""),!a.match(/^\(?\-?\(?\d+\)?\/\(?\d+\)?$/)&&!a.match(/^\(?\d+\)?\/\(?\-?\d+\)?$/)&&!a.match(/^\s*?\-?\d+\s*$/))return _("not a valid fraction")+". "}else if(-1!=d.indexOf("fracordec")){if(a=a.replace(/\s/g,""),!a.match(/^\-?\(?\d+\s*\/\s*\-?\d+\)?$/)&&!a.match(/^\-?\d+$/)&&!a.match(/^\-?(\d+|\d+\.\d*|\d*\.\d+)$/))return _(" invalid entry format")+
". "}else if(-1!=d.indexOf("mixednumber")){if(!a.match(/^\s*\-?\s*\d+\s*(_|\s)\s*\d+\s*\/\s*\d+\s*$/)&&!a.match(/^\s*?\-?\d+\s*$/)&&!a.match(/^\s*\-?\d+\s*\/\s*\-?\d+\s*$/))return _("not a valid mixed number")+". ";a.replace(/_/," ")}else if(-1!=d.indexOf("scinot")&&(a=a.replace(/\s/g,""),a=a.replace(/(x|X|\u00D7)/,"xx"),!a.match(/^\-?[1-9](\.\d*)?(\*|xx)10\^(\(?\-?\d+\)?)$/)))return _("not valid scientific notation")+". ";return""}
function syntaxcheckexpr(a,d,c){var f="";-1!=d.indexOf("notrig")&&a.match(/(sin|cos|tan|cot|sec|csc)/i)?f+=_("no trig functions allowed")+". ":-1!=d.indexOf("nodecimal")&&-1!=a.indexOf(".")&&(f+=_("no decimals allowed")+". ");for(var h=d=0,l=0;l<a.length;l++)"("==a.charAt(l)?d++:")"==a.charAt(l)?d--:"["==a.charAt(l)?h++:"]"==a.charAt(l)&&h--;if(0!=d||0!=h)f+=" ("+_("unmatched parens")+"). ";reg=c?new RegExp("(sqrt|ln|log|sinh|cosh|tanh|sech|csch|coth|sin|cos|tan|sec|csc|cot|abs)s*("+c+"|\\d+)","i"):
/(sqrt|ln|log|sinh|cosh|tanh|sech|csch|coth|sin|cos|tan|sec|csc|cot|abs)s*(\d+)/i;errstuff=a.match(reg);null!=errstuff&&(f+="["+_("use function notation")+" - "+_("use $1 instead of $2",errstuff[1]+"("+errstuff[2]+")",errstuff[0])+"]. ");c&&(reg=new RegExp("(repvars\\d+|"+c+"|arc|sqrt|root|ln|log|sinh|cosh|tanh|sech|csch|coth|sin|cos|tan|sec|csc|cot|abs|pi|e|sign|DNE|oo)","ig"),a.replace(reg,"").match(/[a-zA-Z]/)&&(f+=_(" Check your variables - you might be using an incorrect one")+". "));a.match(/\|/)&&
(f+=_(" Use abs(x) instead of |x| for absolute values")+". ");a.match(/%/)&&!a.match(/^\s*[+-]?\s*((\d+(\.\d*)?)|(\.\d+))\s*%\s*$/)&&(f+=_(" Do not use the percent symbol, %")+". ");return f}var greekletters="alpha beta chi delta epsilon gamma phi psi sigma rho theta lambda mu nu omega tau".split(" "),calctoproc={},intcalctoproc={},calcformat={},functoproc={},matcalctoproc={},ntupletoproc={},complextoproc={},callbackstack={},matsize={},vlist={},flist={},pts={},iseqn={};
function doonsubmit(a,d,c){for(var f in callbackstack)callbackstack[f](f);if(null!=a){if("submitted"==a.className)return alert(_("You have already submitted this page.  Please be patient while your submission is processed.")),a.className="submitted2",!1;if("submitted2"==a.className)return!1;a.className="submitted";if(!c&&(d?!confirmSubmit2(a):!confirmSubmit(a)))return a.className="",!1}for(f in intcalctoproc)if(f=parseInt(f),null!=document.getElementById("tc"+f)){fullstr=document.getElementById("tc"+
f).value;fullstr=fullstr.replace(/\s+/g,"");fullstr=normalizemathunicode(fullstr);if(fullstr.match(/DNE/i))fullstr=fullstr.toUpperCase();else{-1!=calcformat[f].indexOf("inequality")&&(fullstr=ineqtointerval(fullstr));if(-1!=calcformat[f].indexOf("list")){d=0;a=[];for(c=1;c<fullstr.length-1;c++)","!=fullstr.charAt(c)||")"!=fullstr.charAt(c-1)&&"]"!=fullstr.charAt(c-1)||"("!=fullstr.charAt(c+1)&&"["!=fullstr.charAt(c+1)||(a.push(fullstr.substring(d,c)),d=c+1);a.push(fullstr.substring(d))}else a=fullstr.split(/U/i);
for(k=0;k<a.length;k++)if(str=a[k],0<str.length&&str.match(/,/)){sm=str.charAt(0);em=str.charAt(str.length-1);vals=str.substring(1,str.length-1);vals=vals.split(/,/);for(d=0;2>d;d++)if(!vals[d].match(/oo$/)&&!vals[d].match(/oo\W/)){c="";try{with(Math)var h=eval(mathjs(vals[d]))}catch(l){c="syntax incomplete"}isNaN(h)||"Infinity"==h||(vals[d]=(1E-15>Math.abs(h)?0:h)+c)}a[k]=sm+vals[0]+","+vals[1]+em}fullstr=-1!=calcformat[f].indexOf("list")?a.join(","):a.join("U")}document.getElementById("qn"+f).value=
fullstr}for(f in calctoproc)if(f=parseInt(f),null!=document.getElementById("tc"+f)){str=document.getElementById("tc"+f).value;str=normalizemathunicode(str);str=str.replace(/=/,"");if(-1!=calcformat[f].indexOf("list"))a=str.split(/,/);else if(-1!=calcformat[f].indexOf("set"))if(str.match(/^\s*{.*?}\s*$/))a=str.replace(/^\s*{(.*?)}\s*$/,"$1").split(/,/);else continue;else a=[],a[0]=str;for(d=0;d<a.length;d++){str=a[d];str=str.replace(/(\d)\s*,\s*(?=\d{3}\b)/g,"$1");str=str.replace(",","*NaN*");if(-1!=
calcformat[f].indexOf("scinot")||-1!=calcformat[f].indexOf("allowxtimes"))str=str.replace(/(x|X|\u00D7)/,"*");str.match(/^\s*[+-]?\s*((\d+(\.\d*)?)|(\.\d+))\s*%\s*$/)&&(str=str.replace(/%/,"")+"/100");str=str.replace(/(\d+)\s*_\s*(\d+\s*\/\s*\d+)/,"($1+$2)");-1!=calcformat[f].indexOf("mixed")&&(str=str.replace(/(\d+)\s+(\d+\s*\/\s*\d+)/,"($1+$2)"));if(str.match(/^\s*$/))h="";else if(str.match(/oo$/)||str.match(/oo\W/))h=str;else if(str.match(/DNE/i))h=str.toUpperCase();else try{with(Math)h=eval(mathjs(str))}catch(l){h=
""}a[d]=h}document.getElementById("qn"+f).value=a.join(",")}for(f in matcalctoproc){f=parseInt(f);if(null!=matsize[f]){if(null==document.getElementById("qn"+f+"-0"))continue;msize=matsize[f].split(",");str=matrixcalc("qn"+f,null,msize[0],msize[1])}else{if(null==document.getElementById("tc"+f))continue;str=matrixcalc("tc"+f,null)}document.getElementById("qn"+f).value=str}for(f in ntupletoproc)f=parseInt(f),null!=document.getElementById("tc"+f)&&(str=ntuplecalc("tc"+f,null,""),document.getElementById("qn"+
f).value=str);for(f in complextoproc)f=parseInt(f),null!=document.getElementById("tc"+f)&&(str=complexcalc("tc"+f,null,""),document.getElementById("qn"+f).value=str);for(f in functoproc)if(f=parseInt(f),null!=document.getElementById("tc"+f)){str=document.getElementById("tc"+f).value;str=str.replace(/,/g,"");str=normalizemathunicode(str);if(1==iseqn[f])str=str.replace(/(.*)=(.*)/,"$1-($2)");else if(str.match("="))continue;fl=flist[f];varlist=vlist[f];vars=varlist.split("|");for(h=0;h<vars.length;h++){foundaltcap=
!1;for(d=0;d<vars.length;d++)if(h!=d&&vars[d].toLowerCase()==vars[h].toLowerCase()&&vars[d]!=vars[h]){foundaltcap=!0;break}foundaltcap?regmod="g":(str=str.replace(new RegExp(vars[h],"gi"),vars[h]),regmod="gi");2<vars[h].length&&vars[h].match(/^\w+_\w+$/)?(a=vars[h].match(/^(\w+)_(\w+)$/),str=str.replace(new RegExp(a[1]+"_\\("+a[2]+"\\)",regmod),vars[h]),str=str.replace(new RegExp(a[0],"g"),"repvars"+h),vars[h]="repvars"+h):"varE"==vars[h]&&(str=str.replace("E","varE"))}varlist=vars.join("|");""!=
fl&&(reg=new RegExp("("+fl+")\\(","g"),str=str.replace(reg,"$1*sin($1+"));vars=varlist.split("|");h=document.getElementById("qn"+f);h.value=mathjs(str,varlist);ptlist=pts[f].split(",");vals=[];for(a=0;a<ptlist.length;a++){inputs=ptlist[a].split("~");totest="";for(d=0;d<inputs.length;d++)totest+="var "+vars[d]+"="+inputs[d]+";";totest=""==h.value?totest+(Math.random()+";"):totest+(h.value+";");try{with(Math)vals[a]=scopedeval(totest)}catch(l){vals[a]=NaN}"synerr"==vals[a]&&(vals[a]=NaN)}document.getElementById("qn"+
f+"-vals").value=vals.join(",")}return!0}function scopedeval(a){var d;try{with(Math)d=eval(a);return d}catch(c){return"synerr"}}function arraysearch(a,d){for(var c=0;c<d.length;c++)if(d[c]==a)return c;return-1}function toggleinlinebtn(a,d){var c=document.getElementById(a);"none"==c.style.display?c.style.display="":c.style.display="none";if(null!=d){var c=document.getElementById(d),f=c.innerHTML;c.innerHTML=f.match(/\+/)?f.replace(/\+/,"-"):f.replace(/\-/,"+")}}
function assessbackgsubmit(a,d){if(null!=d&&document.getElementById(d).innerHTML==_("Submitting..."))return!1;window.XMLHttpRequest?req=new XMLHttpRequest:window.ActiveXObject&&(req=new ActiveXObject("Microsoft.XMLHTTP"));if("undefined"!=typeof req){"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();doonsubmit();params="embedpostback=true";if(null!=a){for(var c=[],f=document.getElementsByTagName("input"),h=0;h<f.length;h++)c.push(f[h]);f=document.getElementsByTagName("select");for(h=0;h<f.length;h++)c.push(f[h]);
f=document.getElementsByTagName("textarea");for(h=0;h<f.length;h++)c.push(f[h]);f=new RegExp("^(qn|tc|qs)("+a+"\\b|"+(a+1)+"\\d{3})");for(h=0;h<c.length;h++)c[h].name.match(f)&&("radio"!=c[h].type&&"checkbox"!=c[h].type||c[h].checked)&&(params+="&"+c[h].name+"="+encodeURIComponent(c[h].value));params+="&toscore="+a;params+="&verattempts="+document.getElementById("verattempts"+a).value}else{c=document.getElementsByTagName("input");for(h=0;h<c.length;h++)c[h].name.match(/^(qn|tc)/)&&("radio"!=c[h].type||
"checkbox"!=c[h].type||c[h].checked)&&(params+="&"+c[h].name+"="+encodeURIComponent(c[h].value));params+="&verattempts="+document.getElementById("verattempts").value}params+="&asidverify="+document.getElementById("asidverify").value;params+="&disptime="+document.getElementById("disptime").value;params+="&isreview="+document.getElementById("isreview").value;null!=d&&(document.getElementById(d).innerHTML=_("Submitting..."));req.open("POST",assesspostbackurl,!0);req.setRequestHeader("Content-type","application/x-www-form-urlencoded");
req.onreadystatechange=function(){assessbackgsubmitCallback(a,d)};req.send(params)}else null!=d&&(document.getElementById(d).innerHTML=_("Error Submitting."))}
function assessbackgsubmitCallback(a,d){if(4==req.readyState)if(200==req.status){if(null!=d&&(document.getElementById(d).innerHTML=""),null!=a){for(var c=[],f=req.responseText;-1<f.indexOf("<script")||-1<f.indexOf("\x3c/script");){var h=f.indexOf("<script"),l=f.indexOf(">",h),m=f.indexOf("\x3c/script",h),n=f.indexOf(">",m);c.push(f.substring(l+1,m));f=f.substring(0,h)+f.substring(n+1)}document.getElementById("embedqwrapper"+a).innerHTML=f;usingASCIIMath&&rendermathnode(document.getElementById("embedqwrapper"+
a));usingASCIISvg&&setTimeout("drawPics()",100);usingTinymceEditor&&initeditor("textareas","mceEditor");for(f=initstack.length=0;f<c.length;f++)try{if(k=c[f].match(/canvases\[(\d+)\]/))"undefined"!=typeof G_vmlCanvasManager&&(c[f]=c[f]+'G_vmlCanvasManager.initElement(document.getElementById("canvas'+k[1]+'"));'),c[f]=c[f]+"imathasDraw.initCanvases("+k[1]+");";eval(c[f])}catch(z){}for(f=0;f<initstack.length;f++)initstack[f]();c=(a+1).toString().length;for(f in LivePreviews)(f==a||999<f&&f.toString().substr(0,
c)==a+1)&&LivePreviews[f].Init();$(window).trigger("ImathasEmbedReload");initcreditboxes();c=0;"undefined"!=typeof window.pageYOffset?c=window.pageYOffset:(c=document.body,f=document.documentElement,f=f.clientHeight?f:c,c=f.scrollTop);var t=findPos(document.getElementById("embedqwrapper"+a))[1];c>t&&setTimeout(function(){window.scroll(0,t)},150)}}else null!=d&&(document.getElementById(d).innerHTML=_("Submission Error")+":\n"+req.status+"\n"+req.statusText)}
function AutoSuggest(a,d){var c=this;this.elem=a;this.suggestions=d;this.eligible=[];this.inputText=null;this.highlighted=-1;this.div=document.getElementById("autosuggest");null==this.div&&(this.div=document.createElement("div"),this.div.id="autosuggest",document.getElementsByTagName("body")[0].appendChild(this.div),this.div.appendChild(document.createElement("ul")));a.setAttribute("autocomplete","off");if(!a.id){var f="autosuggest"+AutoSuggestIdCounter;AutoSuggestIdCounter++;a.id=f}a.onkeydown=function(a){a=
c.getKeyCode(a);switch(a){case 9:c.useSuggestion("tab");break;case 13:return c.useSuggestion("enter"),!1;case 27:c.hideDiv();break;case 38:0<c.highlighted&&c.highlighted--;c.changeHighlight(a);break;case 40:c.highlighted<c.eligible.length-1&&c.highlighted++,c.changeHighlight(a)}};a.onkeyup=function(a){switch(c.getKeyCode(a)){case 9:case 27:case 38:case 40:break;default:1<this.value.length?(c.inputText=this.value,c.getEligible(),c.highlighted=0<c.eligible.length?0:-1,c.createDiv(),c.positionDiv(),
c.showDiv()):(c.hideDiv(),0==this.value.length&&(c.inputText=""))}};a.onblur=function(a){setTimeout(c.hideDiv,100)};this.useSuggestion=function(a){-1<this.highlighted&&(this.elem.value=this.eligible[this.highlighted]);this.hideDiv()};this.showDiv=function(){this.div.style.display="block"};this.hideDiv=function(){c.div.style.display="none";c.highlighted=-1};this.changeHighlight=function(){var a=this.div.getElementsByTagName("LI");for(i in a)a[i].className=this.highlighted==i?"selected":""};this.positionDiv=
function(){var a=this.elem,d=findPos(a);d[1]+=a.offsetHeight;this.div.style.left=d[0]+"px";this.div.style.top=d[1]+"px"};this.createDiv=function(){var a=document.createElement("ul");for(i in this.eligible){var d=this.eligible[i],f=document.createElement("li"),n=document.createElement("a");n.href="#";n.onclick=function(){return!1};n.innerHTML=d;f.appendChild(n);c.highlighted==i&&(f.className="selected");a.appendChild(f)}this.div.replaceChild(a,this.div.childNodes[0]);a.onmouseover=function(a){for(a=
c.getEventSource(a);a.parentNode&&"LI"!=a.tagName.toUpperCase();)a=a.parentNode;var d=c.div.getElementsByTagName("LI");for(i in d)if(d[i]==a){c.highlighted=i;break}c.changeHighlight()};a.onclick=function(a){c.useSuggestion("click");c.hideDiv();c.cancelEvent(a);return!1};this.div.className="suggestion_list";this.div.style.position="absolute"};this.getEligible=function(){this.eligible=[];if(-1==this.inputText.indexOf(" ")){var a=new RegExp("\\b"+this.inputText.toLowerCase());for(i in this.suggestions){var d=
this.suggestions[i];d.toLowerCase().match(a)&&(this.eligible[this.eligible.length]=d)}}};this.getKeyCode=function(a){if(a)return a.keyCode;if(window.event)return window.event.keyCode};this.getEventSource=function(a){if(a)return a.target;if(window.event)return window.event.srcElement};this.cancelEvent=function(a){a&&(a.preventDefault(),a.stopPropagation());window.event&&(window.event.returnValue=!1)}}var AutoSuggestIdCounter=0;function isBlank(a){return!a||0===a.length||/^\s*$/.test(a)}
function editdebit(a){var d=$("#qn"+(1*a.id.substr(2)-1));!isBlank(a.value)&&d.hasClass("iscredit")&&(d.is("select")?d.css("margin-right",20):d.width(d.width()+20),d.css("padding-left",0),d.removeClass("iscredit"))}function editcredit(a){var d=$("#qn"+(1*a.id.substr(2)-2));isBlank(a.value)||d.hasClass("iscredit")||(d.is("select")?d.css("margin-right",0):d.width(d.width()-20),d.css("padding-left",20),d.addClass("iscredit"))}
function initcreditboxes(){$(".creditbox").each(function(a,d){if(!isBlank(d.value)&&20!=$(d).css("padding-left")){var c=$("#qn"+(1*d.id.substr(2)-2));c.is("select")?c.css("margin-right",0):c.width(c.width()-20);c.css("padding-left",20);c.addClass("iscredit")}})}initstack.push(initcreditboxes);
function initqsclickchange(){$("input[id^=qs][value=spec]").each(function(a,d){$(d).siblings("input[type=text]").off("keyup.qsclickchange").on("keyup.qsclickchange",function(a){8!=a.keyCode&&46!=a.keyCode&&$(d).prop("checked",!0)})})}$(window).on("ImathasEmbedReload",initqsclickchange);initstack.push(initqsclickchange);
function assessmentTimer(a,d){var c=Date.now(),f,h,l,m,n,t;n=setInterval(function(){f=a-Math.floor((Date.now()-c)/1E3);if(0>=f){f=0;clearInterval(n);if(d){document.getElementById("timelimitholder").className="";document.getElementById("timelimitholder").style.color="#f00";document.getElementById("timelimitholder").innerHTML=_("Time limit expired - submitting now");document.getElementById("timelimitholder").style.fontSize="300%";if(null==document.getElementById("qform")){setTimeout("window.location.pathname='"+
imasroot+"/assessment/showtest.php?action=skip&superdone=true'",2E3);return}var z=document.getElementById("qform"),A=z.getAttribute("action");z.setAttribute("action",A+"&superdone=true");doonsubmit(z,!0,!0)&&setTimeout('document.getElementById("qform").submit()',2E3);return 0}alert(_("Time Limit has elapsed"))}m=Math.floor(f%60);l=Math.floor(f/60%60);h=Math.floor(f/3600);0==h&&5>=l&&(document.getElementById("timeremaining").style.color="#f00");0==h&&0==l&&5>=m&&(document.getElementById("timeremaining").style.fontSize=
"150%");t=(0<h?h+":":"")+(0<h&&10>l?"0":"")+l+":"+(10>m?"0":"")+m;document.getElementById("timeremaining").innerHTML=t},1E3);$(document).ready(function(){var a=$("#timerwrap"),d=a.position();$(window).scroll(function(){$(window).scrollTop()>=d.top?a.addClass("sticky"):a.removeClass("sticky")})})}
function toggletimer(){"[x]"==$("#timerhide").text()?($("#timercontent").hide(),$("#timerhide").text("["+_("Show Timer")+"]"),$("#timerhide").attr("title","["+_("Show Timer")+"]")):($("#timercontent").show(),$("#timerhide").text("[x]"),$("#timerhide").attr("title",_("Hide Timer")))}
function toggleintroshow(a){var d=document.getElementById("introtoggle"+a);a=document.getElementById("intropiece"+a);d.innerHTML.match("Hide")?(d.innerHTML=d.innerHTML.replace("Hide","Show"),a.style.display="none"):(d.innerHTML=d.innerHTML.replace("Show","Hide"),a.style.display="block")}
function togglemainintroshow(a){$("#intro").hasClass("hidden")?($(a).html(_("Hide Intro/Instructions")),$("#intro").removeClass("hidden").addClass("intro")):($("#intro").addClass("hidden"),$(a).html(_("Show Intro/Instructions")))}
function checkComplete(a){if("undefined"!=typeof tinyMCE)try{tinyMCE.triggerSave()}catch(l){}if(!a.elements)return!0;for(var d=0;d<a.elements.length;d++){var c=a.elements[d];if("undefined"!=typeof c.type&&"undefined"!=typeof c.name&&""!=c.name&&!$(c).is(":not(:visible)"))if("text"==c.type||"textarea"==c.type||"password"==c.type||"file"==c.type){if(""==c.value)return!1}else if(-1!=c.type.indexOf("select")){if(-1==c.selectedIndex)return!1}else if("radio"==c.type){var f=a[c.name],h=!1;if(f.length)for(c=
0;c<f.length&&!(h=f[c].checked);c++);else h=c.checked;if(!h)return!1}}return!0}function confirmSubmit(a){return checkComplete(a)?!0:confirm("Not all question parts have been answered.  Are you sure you want to submit this question?")}function confirmSubmit2(a){return checkComplete(a)?!0:confirm("Not all questions have been answered completely.  If you are saving your answers for later, this is fine.  If you are submitting for grading, are you sure you want to submit now?")}
var canvases=[],drawla=[],imathasDraw=function(a){function d(a,d,f,g,h,l,m,n,w,t,D,z,y,G,H){d=document.getElementById(d);d.style.userSelect="none";d.style.webkitUserSelect="none";d.style.MozUserSelect="none";var L=A(d);q[a]={el:d,left:L.x,top:L.y,width:d.offsetWidth,height:d.offsetHeight,xmin:h,xmax:l,ymin:m,ymax:n,imgborder:w,imgwidth:t,imgheight:D,mode:z,dotline:y};"string"==typeof H&&-1!=H.indexOf(":")?(H=H.split(":"),q[a].snaptogridx=1*H[0],q[a].snaptogridy=1*H[1]):(q[a].snaptogridx=H,q[a].snaptogridy=
H);q[a].pixperx=(t-2*w)/(l-h);q[a].pixpery=m==n?1:(D-2*w)/(n-m);ga[a]=document.getElementById(g);null==v[a]&&(v[a]=[]);null==N[a]&&(N[a]=[]);null==K[a]&&(K[a]=[]);null==r[a]&&(r[a]=[]);null==J[a]&&(J[a]=[]);null==u[a]&&(u[a]=[]);null==S[a]&&(S[a]=[]);ha[a]=5<=z?1:0;W[a]=G;da[a]=new Image;da[a].onload=function(){var g=b;b=a;c();b=g};da[a].src=f}function c(a,d){try{var c=q[b].el.getContext("2d")}catch(f){ia||(ia=!0,alert("Your browser does not support drawing answer entry.  Please try again using Internet Explorer 6+ (Windows), FireFox 1.5+ (Win/Mac), Safari 1.3+ (Mac), Opera 9+ (Win/Mac), or Camino (Mac)"))}c.fillStyle=
"rgb(0,0,255)";c.lineWidth=2;c.strokeStyle="rgb(0,0,255)";c.clearRect(0,0,q[b].imgwidth,q[b].imgheight);c.drawImage(da[b],0,0);c.beginPath();for(var g=0;g<u[b].length;g++){var h=g%3;c.strokeStyle=ja[h];c.fillStyle=ja[h];var l=null,m=null,n=null,t=null,E=null;3==u[b][g].length?(m=u[b][g][1][0],t=u[b][g][1][1],n=u[b][g][2][0],E=u[b][g][2][1]):2==u[b][g].length?(m=u[b][g][1][0],t=u[b][g][1][1],n=a,E=d):L==g&&null!=a&&1==u[b][g].length&&(m=a,t=d);if(null!=n){c.save();c.fillStyle=qa[h];c.beginPath();if(10.2>=
S[b][g]){m!=u[b][g][0][0]&&(l=(t-u[b][g][0][1])/(m-u[b][g][0][0]));if(1>Math.abs(m-u[b][g][0][0])||100<Math.abs(l))c.moveTo(u[b][g][0][0],0),c.lineTo(u[b][g][0][0],q[b].imgheight),n>m?(c.lineTo(q[b].imgwidth,q[b].imgheight),c.lineTo(q[b].imgwidth,0)):(c.lineTo(0,q[b].imgheight),c.lineTo(0,0));else{var h=l*(n-m)+t,n=u[b][g][0][1]-l*u[b][g][0][0],F=u[b][g][0][1]+l*(q[b].imgwidth-u[b][g][0][0]);c.moveTo(0,n);c.lineTo(q[b].imgwidth,F);E>h?(c.lineTo(q[b].imgwidth,q[b].imgheight),c.lineTo(0,q[b].imgheight)):
(c.lineTo(q[b].imgwidth,0),c.lineTo(0,0))}c.closePath()}else{var h=c,z=u[b][g][0][0],y=u[b][g][0][1],A=m,H=t,I=E,E=q[b].imgwidth,F=q[b].imgheight;h.beginPath();if(H==y)h.moveTo(0,H),h.lineTo(E,H),I<y?(h.lineTo(E,0),h.lineTo(0,0)):(h.lineTo(E,F),h.lineTo(0,F));else{var A=(H-y)/((A-z)*(A-z)),Q=-2*A*z,R=0;H>y&&(R=F);var y=A*z*z+y-R,O=Math.sqrt(Q*Q-4*A*y),y=y+R,H=(-Q-O)/(2*A),R=A*H*H+Q*H+y,O=(-Q+O)/(2*A),U=R;if(O<H)var Y=H,H=O,O=Y;var Y=2*A*(H-z),Z=R-Y*H,z=-Y,z=(Z-(U-z*O))/(z-Y),Y=Y*z+Z;0>A&&I<A*n*n+
Q*n+y||0<A&&I>A*n*n+Q*n+y?(h.moveTo(H,R),h.quadraticCurveTo(z,Y,O,U)):(n=F,2>Math.abs(R-F)&&(n=0),h.moveTo(0,R),h.lineTo(H,R),h.quadraticCurveTo(z,Y,O,U),h.lineTo(E,U),h.lineTo(E,n),h.lineTo(0,n))}h.closePath()}c.fill();c.restore()}c.beginPath();if(null!=m)if(10.2>=S[b][g])m!=u[b][g][0][0]&&(l=(t-u[b][g][0][1])/(m-u[b][g][0][0])),1>Math.abs(m-u[b][g][0][0])||100<Math.abs(l)?10.2==S[b][g]?null!=w&&10<=w.mode&&11>w.mode&&w.num==g&&0==w.subnum?(c.dashedLine(u[b][g][1][0],u[b][g][1][1],u[b][g][1][0],
q[b].imgheight),c.dashedLine(u[b][g][1][0],u[b][g][1][1],u[b][g][1][0],0)):(c.dashedLine(u[b][g][0][0],u[b][g][0][1],u[b][g][0][0],q[b].imgheight),c.dashedLine(u[b][g][0][0],u[b][g][0][1],u[b][g][0][0],0)):(c.moveTo(u[b][g][0][0],0),c.lineTo(u[b][g][0][0],q[b].imgheight),c.stroke()):(n=u[b][g][0][1]-l*u[b][g][0][0],F=u[b][g][0][1]+l*(q[b].imgwidth-u[b][g][0][0]),10.2==S[b][g]?null!=w&&10<=w.mode&&11>w.mode&&w.num==g&&0==w.subnum?(c.dashedLine(u[b][g][1][0],u[b][g][1][1],q[b].imgwidth,F),c.dashedLine(u[b][g][1][0],
u[b][g][1][1],0,n)):(c.dashedLine(u[b][g][0][0],u[b][g][0][1],q[b].imgwidth,F),c.dashedLine(u[b][g][0][0],u[b][g][0][1],0,n)):(c.moveTo(0,n),c.lineTo(q[b].imgwidth,F),c.stroke()));else if(10.3==S[b][g]){if(m!=u[b][g][0][0])if(t==u[b][g][0][1])c.moveTo(0,t),c.lineTo(q[b].imgwidth,t);else{var P=(t-u[b][g][0][1])/((m-u[b][g][0][0])*(m-u[b][g][0][0]));t>u[b][g][0][1]?(l=Math.sqrt((q[b].imgheight-u[b][g][0][1])/P)+u[b][g][0][0],h=-1*Math.sqrt((q[b].imgheight-u[b][g][0][1])/P)+u[b][g][0][0],F=u[b][g][0][1]-
(q[b].imgheight-u[b][g][0][1]),n=q[b].imgheight):(l=Math.sqrt((0-u[b][g][0][1])/P)+u[b][g][0][0],h=-1*Math.sqrt((0-u[b][g][0][1])/P)+u[b][g][0][0],F=2*u[b][g][0][1],n=0);E=l+2/3*(u[b][g][0][0]-l);F=n+2/3*(F-n);I=E+(h-l)/3;A=F;c.moveTo(l,n);c.bezierCurveTo(E,F,I,A,h,n)}c.stroke()}else if(m!=u[b][g][0][0]){l=c;h=u[b][g][0][0];n=u[b][g][0][1];F=m;A=t;E=q[b].imgwidth;z=q[b].imgheight;if(A==n)l.moveTo(0,A),l.dashedLine(0,A,E,A);else{F=(A-n)/((F-h)*(F-h));I=-2*F*h;Q=0;A>n&&(Q=z);A=F*h*h+n-Q;z=Math.sqrt(I*
I-4*F*A);A+=Q;Q=(-I-z)/(2*F);z=(-I+z)/(2*F);z<Q&&(y=Q,Q=z,z=y);y=h;H=n;for(R=0;y>Q-5&&-5<y;)0==R%2?l.moveTo(y,H):l.lineTo(y,H),y-=Math.min(Math.sqrt(64/(1+Math.pow(2*F*(y-h),2))),Math.sqrt(8/Math.abs(F))),H=F*y*y+I*y+A,R++;y=h;H=n;for(R=0;y<z+5&&y<E+5;)0==R%2?l.moveTo(y,H):l.lineTo(y,H),y+=Math.min(Math.sqrt(64/(1+Math.pow(2*F*(y-h),2))),Math.sqrt(8/Math.abs(F))),H=F*y*y+I*y+A,R++}l.stroke()}c.beginPath();for(l=0;l<u[b][g].length;l++)2==l?(c.arc(u[b][g][l][0],u[b][g][l][1],4,0,2*Math.PI,!0),c.fill()):
c.fillRect(u[b][g][l][0]-3,u[b][g][l][1]-3,6,6);1==u[b][g].length&&null!=m&&c.fillRect(m-3,t-3,6,6);c.beginPath()}c.fillStyle="rgb(0,0,255)";c.lineWidth=1==W[b]?4:2;c.strokeStyle="rgb(0,0,255)";for(g=0;g<r[b].length;g++){if(5<=J[b][g]&&6>J[b][g])t=m=l=null,2==r[b][g].length?(m=r[b][g][1][0],t=r[b][g][1][1]):G==g&&null!=a&&1==r[b][g].length&&(m=a,t=d),null!=m&&(5.3==J[b][g]||5.4==J[b][g]?(c.moveTo(r[b][g][0][0],r[b][g][0][1]),c.lineTo(m,t),5.4==J[b][g]&&(l=[m-r[b][g][0][0],t-r[b][g][0][1]],h=Math.sqrt(l[0]*
l[0]+l[1]*l[1]),1E-4<h&&(l=[l[0]/h,l[1]/h],h=[-l[1],l[0]],c.moveTo(m-15*l[0]-4*h[0],t-15*l[1]-5*h[1]),c.lineTo(m,t),c.moveTo(m-15*l[0]+4*h[0],t-15*l[1]+5*h[1]),c.lineTo(m,t)))):(m!=r[b][g][0][0]&&(l=(t-r[b][g][0][1])/(m-r[b][g][0][0])),1>Math.abs(m-r[b][g][0][0])||100<Math.abs(l)?5.2==J[b][g]?(c.moveTo(r[b][g][0][0],r[b][g][0][1]),t>r[b][g][0][1]?c.lineTo(r[b][g][0][0],q[b].imgheight):c.lineTo(r[b][g][0][0],0)):(c.moveTo(r[b][g][0][0],0),c.lineTo(r[b][g][0][0],q[b].imgheight)):(n=r[b][g][0][1]-l*
r[b][g][0][0],F=r[b][g][0][1]+l*(q[b].imgwidth-r[b][g][0][0]),5.2==J[b][g]?(c.moveTo(r[b][g][0][0],r[b][g][0][1]),m>r[b][g][0][0]?c.lineTo(q[b].imgwidth,F):c.lineTo(0,n)):(c.moveTo(0,n),c.lineTo(q[b].imgwidth,F)))));else if(6==J[b][g])m=t=null,2==r[b][g].length?(m=r[b][g][1][0],t=r[b][g][1][1]):G==g&&null!=a&&1==r[b][g].length&&(m=a,t=d),null!=m&&m!=r[b][g][0][0]&&(t==r[b][g][0][1]?(c.moveTo(0,t),c.lineTo(q[b].imgwidth,t)):(P=(t-r[b][g][0][1])/((m-r[b][g][0][0])*(m-r[b][g][0][0])),t>r[b][g][0][1]?
(l=Math.sqrt((q[b].imgheight-r[b][g][0][1])/P)+r[b][g][0][0],h=-1*Math.sqrt((q[b].imgheight-r[b][g][0][1])/P)+r[b][g][0][0],F=r[b][g][0][1]-(q[b].imgheight-r[b][g][0][1]),n=q[b].imgheight):(l=Math.sqrt((0-r[b][g][0][1])/P)+r[b][g][0][0],h=-1*Math.sqrt((0-r[b][g][0][1])/P)+r[b][g][0][0],F=2*r[b][g][0][1],n=0),E=l+2/3*(r[b][g][0][0]-l),F=n+2/3*(F-n),I=E+(h-l)/3,A=F,c.moveTo(l,n),c.bezierCurveTo(E,F,I,A,h,n)));else if(6.5==J[b][g]){if(m=t=null,2==r[b][g].length?(m=r[b][g][1][0],t=r[b][g][1][1]):G==g&&
null!=a&&1==r[b][g].length&&(m=a,t=d),null!=m&&m!=r[b][g][0][0])if(t==r[b][g][0][1])c.moveTo(r[b][g][0][0],t),m>r[b][g][0][0]?c.lineTo(q[b].imgwidth,t):c.lineTo(0,t);else{l=m<r[b][g][0][0]?-1:1;P=(t-r[b][g][0][1])/Math.sqrt(l*(m-r[b][g][0][0]));c.moveTo(r[b][g][0][0],r[b][g][0][1]);E=r[b][g][0][0];n=r[b][g][0][1];do E+=3*l,c.lineTo(E,P*Math.sqrt(l*(E-r[b][g][0][0]))+r[b][g][0][1]);while(0<E&&E<q[b].imgwidth&&0<n&&n<q[b].imgheight)}}else if(7==J[b][g])2==r[b][g].length?(m=r[b][g][1][0],t=r[b][g][1][1]):
G==g&&null!=a&&1==r[b][g].length&&(m=a,t=d),null==m||m==r[b][g][0][0]&&t==r[b][g][0][1]||c.arc(r[b][g][0][0],r[b][g][0][1],Math.sqrt((m-r[b][g][0][0])*(m-r[b][g][0][0])+(t-r[b][g][0][1])*(t-r[b][g][0][1])),0,2*Math.PI,!0);else if(8==J[b][g])t=m=l=null,2==r[b][g].length?(m=r[b][g][1][0],t=r[b][g][1][1]):G==g&&null!=a&&1==r[b][g].length&&(m=a,t=d),null!=m&&(m!=r[b][g][0][0]&&(l=(t-r[b][g][0][1])/(m-r[b][g][0][0]),m<r[b][g][0][0]&&(l*=-1)),1>Math.abs(m-r[b][g][0][0])||100<Math.abs(l)?(c.moveTo(r[b][g][0][0],
r[b][g][0][1]),t>r[b][g][0][1]?c.lineTo(r[b][g][0][0],q[b].imgheight):c.lineTo(r[b][g][0][0],0)):(n=r[b][g][0][1]+l*r[b][g][0][0],F=r[b][g][0][1]+l*(q[b].imgwidth-r[b][g][0][0]),c.moveTo(0,n),c.lineTo(r[b][g][0][0],r[b][g][0][1]),c.lineTo(q[b].imgwidth,F)));else if(8.3==J[b][g]){if(m=t=null,2==r[b][g].length?(m=r[b][g][1][0],t=r[b][g][1][1]):G==g&&null!=a&&1==r[b][g].length&&(m=a,t=d),null!=m&&m!=r[b][g][0][0])if(t==r[b][g][0][1])c.moveTo(0,t),c.lineTo(q[b].imgwidth,t);else if(l=q[b].ymax*q[b].pixpery+
q[b].imgborder,h=l-r[b][g][0][1],n=l-t,0<h*n&&m!=r[b][g][0][0])for(h=safepow(n/h,1/(m-r[b][g][0][0])),P=n/safepow(h,m),c.moveTo(r[b][g][0][0],r[b][g][0][1]),E=0;E<q[b].imgwidth+4;E+=3)n=l-P*safepow(h,E),-100>n&&(n=-100),n>q[b].imgheight+100&&(n=q[b].imgheight+100),0==E?c.moveTo(E,n):c.lineTo(E,n)}else if(8.2==J[b][g]){if(m=t=null,2==r[b][g].length?(m=r[b][g][1][0],t=r[b][g][1][1]):G==g&&null!=a&&1==r[b][g].length&&(m=a,t=d),c.strokeStyle="rgb(0,255,0)",c.dashedLine(5,r[b][g][0][1],q[b].imgwidth,r[b][g][0][1]),
c.dashedLine(r[b][g][0][0],5,r[b][g][0][0],q[b].imgheight),c.beginPath(),c.strokeStyle="rgb(0,0,255)",null!=m&&m!=r[b][g][0][0]&&t!=r[b][g][0][1]){P=(t-r[b][g][0][1])*(m-r[b][g][0][0]);for(E=r[b][g][0][0]-1;-4<E;E-=3)n=P/(E-r[b][g][0][0])+r[b][g][0][1],-100>n&&(n=-100),n>q[b].imgheight+100&&(n=q[b].imgheight+100),E==r[b][g][0][0]-1?c.moveTo(E,n):c.lineTo(E,n);for(E=r[b][g][0][0]+1;E<q[b].imgwidth+4;E+=3)n=P/(E-r[b][g][0][0])+r[b][g][0][1],-100>n&&(n=-100),n>q[b].imgheight+100&&(n=q[b].imgheight+100),
E==r[b][g][0][0]+1?c.moveTo(E,n):c.lineTo(E,n);c.stroke()}}else if(9==J[b][g]||9.1==J[b][g])if(m=t=null,2==r[b][g].length?(m=r[b][g][1][0],t=r[b][g][1][1]):G==g&&null!=a&&1==r[b][g].length&&(m=a,t=d),null!=m&&m!=r[b][g][0][0])if(t==r[b][g][0][1])c.moveTo(0,t),c.lineTo(q[b].imgwidth,t);else{if(9==J[b][g])var aa=-1*Math.abs(t-r[b][g][0][1])/2,ba=(t+r[b][g][0][1])/2,P=Math.PI/Math.abs(m-r[b][g][0][0]),ca=t<r[b][g][0][1]?m:r[b][g][0][0];else 9.1==J[b][g]&&(aa=-1*Math.abs(t-r[b][g][0][1]),ba=r[b][g][0][1],
P=.5*Math.PI/Math.abs(m-r[b][g][0][0]),ca=t<r[b][g][0][1]?m:m+2*Math.abs(m-r[b][g][0][0]));for(E=0;E<q[b].imgwidth+4;E+=3)n=aa*Math.cos(P*(E-ca))+ba,0==E?c.moveTo(E,n):c.lineTo(E,n)}c.stroke();c.beginPath()}var M,X,T,V;c.fillStyle="rgba(0,0,255,.5)";for(g=0;g<v[b].length;g++){c.beginPath();for(l=0;l<v[b][g].length;l++)0==l?(c.moveTo(v[b][g][l][0],v[b][g][l][1]),M=v[b][g][l][0],X=v[b][g][l][1]):(c.lineTo(v[b][g][l][0],v[b][g][l][1]),T=v[b][g][l][0],V=v[b][g][l][1]);g==D&&null!=a&&(c.lineTo(a,d),T=
a,V=d);m=.02*q[b].imgwidth;1==W[b]&&T>.98*q[b].imgwidth?(c.moveTo(T,V),c.lineTo(T-m,V+m),c.moveTo(T,V),c.lineTo(T-m,V-m)):1==W[b]&&M>.98*q[b].imgwidth&&(c.moveTo(M,X),c.lineTo(M-m,X+m),c.moveTo(M,X),c.lineTo(M-m,X-m));1==W[b]&&T<.02*q[b].imgwidth?(c.moveTo(T,V),c.lineTo(T+m,V+m),c.moveTo(T,V),c.lineTo(T+m,V-m)):1==W[b]&&M<.02*q[b].imgwidth&&(c.moveTo(M,X),c.lineTo(M+m,X+m),c.moveTo(M,X),c.lineTo(M+m,X-m));c.stroke();if(1<q[b].dotline&&!(1>v[b][g].length-1)&&25>Math.pow(T-M,2)+Math.pow(V-X,2)){c.moveTo(v[b][g][0][0],
v[b][g][0][1]);for(l=1;l<v[b][g].length;l++)c.lineTo(v[b][g][l][0],v[b][g][l][1]);c.closePath();c.fill()}}c.fillStyle="rgb(0,0,255)";c.beginPath();for(g=0;g<N[b].length;g++)c.moveTo(N[b][g][0]+5,N[b][g][1]),c.arc(N[b][g][0],N[b][g][1],5,0,2*Math.PI,!0);c.fill();if(0<q[b].dotline){c.beginPath();for(g=0;g<v[b].length;g++)for(l=0;l<v[b][g].length;l++)if(0==l||25<Math.pow(v[b][g][l][0]-v[b][g][l-1][0],2)+Math.pow(v[b][g][l][1]-v[b][g][l-1][1],2))c.moveTo(v[b][g][l][0]+5,v[b][g][l][1]),c.arc(v[b][g][l][0],
v[b][g][l][1],5,0,2*Math.PI,!0);c.fill()}c.fillStyle="rgb(255,255,255)";c.beginPath();for(g=0;g<K[b].length;g++)c.moveTo(K[b][g][0]+5,K[b][g][1]),c.arc(K[b][g][0],K[b][g][1],4,0,2*Math.PI,!0);3>q[b].mode?c.fill():c.stroke();c.lineWidth=2;c.beginPath();for(g=0;g<K[b].length;g++)c.moveTo(K[b][g][0]+5,K[b][g][1]),c.arc(K[b][g][0],K[b][g][1],4,0,2*Math.PI,!0);c.stroke();for(g=0;g<r[b].length;g++)if(J[b][g]==q[b].mode){c.fillStyle="rgb(255,0,0)";for(l=0;l<r[b][g].length;l++)c.fillRect(r[b][g][l][0]-3,
r[b][g][l][1]-3,6,6);1==r[b][g].length&&null!=a&&G==g&&c.fillRect(a-3,d-3,6,6);c.fillStyle="rgb(0,0,255)"}c="";for(g=0;g<v[b].length;g++)for(0!=g&&(c+=";"),M=0;M<v[b][g].length;M++)0!=M&&(c+=","),c+="("+v[b][g][M][0]+","+v[b][g][M][1]+")";c+=";;";for(g=0;g<N[b].length;g++)0!=g&&(c+=","),c+="("+N[b][g][0]+","+N[b][g][1]+")";c+=";;";for(g=0;g<K[b].length;g++)0!=g&&(c+=","),c+="("+K[b][g][0]+","+K[b][g][1]+")";c+=";;";M=[];for(g=0;g<r[b].length;g++)1<r[b][g].length&&M.push("("+J[b][g]+","+r[b][g][0][0]+
","+r[b][g][0][1]+","+r[b][g][1][0]+","+r[b][g][1][1]+")");c+=M.join(",");c+=";;";M=[];for(g=0;g<u[b].length;g++)2<u[b][g].length&&M.push("("+S[b][g]+","+u[b][g][0][0]+","+u[b][g][0][1]+","+u[b][g][1][0]+","+u[b][g][1][1]+","+u[b][g][2][0]+","+u[b][g][2][1]+")");c+=M.join(",");ga[b].value=c}function f(d){ra++;I();if(O&&1<d.originalEvent.touches.length)return aa=!0,a(document).on("touchend.imathasdraw",l),!0;O?(window.clearTimeout(ka),a(document).on("touchstart.imathasdraw",function(a){O=!0;f(a)}),
a(document).on("touchmove.imathasdraw",m),a(document).on("touchend.imathasdraw",l)):(a(document).on("mousemove.imathasdraw",m),a(document).on("mouseup.imathasdraw",l));d=n(d);if(null==b||null==D&&null==G&&null==L)for(i in q){var B=A(q[i].el);if(B.x<d.x&&B.x+q[i].width>d.x&&B.y<d.y&&B.y+q[i].height>d.y){b=i;break}}null!=b&&(U=!0,B=A(q[b].el),d={x:d.x-B.x,y:d.y-B.y},-1<d.x&&d.x<q[b].width&&-1<d.y&&d.y<q[b].height?(navigator.userAgent.match(/Android/i),0<q[b].snaptogridx&&(d=t(d,b)),1==W[b]&&(d.y=q[b].imgheight/
2),B=h(b,d),null!=B&&(null!=D&&1>B[0]&&D!=B[1]?B=null:null!=G&5<=B[0]&&10>B[0]&&G!=B[1]?B=null:null!=L&&10<=B[0]&&11>B[0]&&L!=B[1]&&(B=null)),null==B?(q[b].el.style.cursor="url("+imasroot+"/img/pendown.cur), default",1==q[b].mode?(N[b].push([d.x,d.y]),w={mode:1,num:N[b].length-1}):2==q[b].mode?(K[b].push([d.x,d.y]),w={mode:2,num:K[b].length-1}):0==q[b].mode||.7==q[b].mode?null==D?(v[b].push([[d.x,d.y]]),D=v[b].length-1):v[b][D].push([d.x,d.y]):.5==q[b].mode?null==D?(v[b].push([[d.x,d.y]]),D=v[b].length-
1):(v[b][D].push([d.x,d.y]),w=D=null):5<=q[b].mode&&10>q[b].mode?null==G?(r[b].push([[d.x,d.y]]),G=r[b].length-1,J[b][G]=q[b].mode,U=!1):(r[b][G].push([d.x,d.y]),2==r[b][G].length&&(w={mode:q[b].mode,num:G,subnum:1},G=null)):10<=q[b].mode&&11>q[b].mode&&(null==L?(u[b].push([[d.x,d.y]]),L=u[b].length-1,S[b][L]=q[b].mode,U=!1):(u[b][L].push([d.x,d.y]),3==u[b][L].length&&(w={mode:q[b].mode,num:L,subnum:1},L=null)))):(0==B[0]||.5==B[0]?null==D?(q[b].el.style.cursor="move",w={mode:q[b].mode,num:B[1],subnum:B[2]},
ba=v[b][B[1]][B[2]],B[2]==v[b][B[1]].length-1&&0==q[b].mode?D=B[1]:0==B[2]&&0==q[b].mode&&(D=B[1],v[b][D].reverse(),w.subnum=v[b][D].length-1)):B[1]==D&&B[2]==v[b][B[1]].length-1?(2>v[b][D].length&&v[b].splice(D,1),D=null):1<q[b].dotline&&B[1]==D&&0==B[2]?(v[b][D].push(v[b][D][0]),D=null):(q[b].el.style.cursor="url("+imasroot+"/img/pendown.cur), default",v[b][D].push([d.x,d.y])):1==B[0]?(q[b].el.style.cursor="move",w={mode:1,num:B[1]}):2==B[0]?(q[b].el.style.cursor="move",w={mode:2,num:B[1]}):5<=
B[0]&&10>B[0]?(q[b].el.style.cursor="move",w={mode:B[0],num:B[1],subnum:B[2]},ba=r[b][B[1]][B[2]]):10<=B[0]&&11>B[0]&&(q[b].el.style.cursor="move",w={mode:B[0],num:B[1],subnum:B[2]},ba=u[b][B[1]][B[2]]),ea=!0),c()):(null!=D&&(2>v[b][D].length&&v[b].splice(D,1),q[b].el.style.cursor="url("+imasroot+"/img/pen.cur), default"),null!=G&&(2>r[b][G].length&&r[b].splice(G,1),q[b].el.style.cursor="url("+imasroot+"/img/pen.cur), default"),null!=L&&(3>u[b][L].length&&u[b].splice(L,1),q[b].el.style.cursor="url("+
imasroot+"/img/pen.cur), default"),w=L=G=D=null,c(),b=null))}function h(a,c){if(O)var d=Math.max(15*window.innerWidth/screen.width,15),d=d*d;else d=25;if(0==ha[a])if(0==q[a].mode||.5==q[a].mode)for(var b=0;b<v[a].length;b++)for(var f=v[a][b].length-1;0<=f;f--){var h=Math.pow(v[a][b][f][0]-c.x,2)+Math.pow(v[a][b][f][1]-c.y,2);if(h<d)return[q[a].mode,b,f]}else if(1==q[a].mode)for(b=0;b<N[a].length;b++){if(Math.pow(N[a][b][0]-c.x,2)+Math.pow(N[a][b][1]-c.y,2)<d)return[1,b]}else if(2==q[a].mode)for(b=
0;b<K[a].length;b++){if(Math.pow(K[a][b][0]-c.x,2)+Math.pow(K[a][b][1]-c.y,2)<d)return[2,b]}else if(5<=q[a].mode&&10>q[a].mode)for(b=0;b<r[a].length;b++){if(J[a][b]==q[a].mode)for(f=r[a][b].length-1;0<=f;f--)if(h=Math.pow(r[a][b][f][0]-c.x,2)+Math.pow(r[a][b][f][1]-c.y,2),h<d)return[J[a][b],b,f]}else{if(10<=q[a].mode&&11>q[a].mode)for(b=0;b<u[a].length;b++)for(f=u[a][b].length-1;0<=f;f--)if(h=Math.pow(u[a][b][f][0]-c.x,2)+Math.pow(u[a][b][f][1]-c.y,2),h<d)return[S[a][b],b,f]}else if(1==q[a].mode)for(b=
0;b<N[a].length;b++){if(Math.pow(N[a][b][0]-c.x,2)+Math.pow(N[a][b][1]-c.y,2)<d)return[1,b]}else if(2==q[a].mode)for(b=0;b<K[a].length;b++){if(Math.pow(K[a][b][0]-c.x,2)+Math.pow(K[a][b][1]-c.y,2)<d)return[2,b]}else if(5<=q[a].mode&&10>q[a].mode)for(b=0;b<r[a].length;b++)for(f=r[a][b].length-1;0<=f;f--){if(J[a][b]==q[a].mode&&(h=Math.pow(r[a][b][f][0]-c.x,2)+Math.pow(r[a][b][f][1]-c.y,2),h<d))return[J[a][b],b,f]}else if(10<=q[a].mode&&11>q[a].mode)for(b=0;b<u[a].length;b++)for(f=u[a][b].length-1;0<=
f;f--)if(h=Math.pow(u[a][b][f][0]-c.x,2)+Math.pow(u[a][b][f][1]-c.y,2),h<d)return[S[a][b],b,f];return null}function l(d){var l=n(d);U=!1;if(null!=b){var y=A(q[b].el),g={x:l.x-y.x,y:l.y-y.y};0<q[b].snaptogridx&&(g=t(g,b));y=-1<g.x&&g.x<q[b].width&&-1<g.y&&g.y<q[b].height;1==ea&&(5<=q[b].mode&&10>q[b].mode?(r[b].push([[g.x,g.y]]),G=r[b].length-1,J[b][G]=q[b].mode):10<=q[b].mode&&11>q[b].mode&&(u[b].push([[g.x,g.y]]),L=u[b].length-1,S[b][L]=q[b].mode));null!=ca&&l.x==ca.x&&l.y==ca.y&&null!=D&&null==
w&&(2>v[b][D].length&&v[b].splice(D,1),w=D=null,c());null!=D&&null==w&&(.5==q[b].mode&&1<v[b][D].length?(dragobj=D=null,c()):.7==q[b].mode&&(dragobj=D=null,c()));null!=G&&1==r[b][G].length&&(aa||!y?(r[b].splice(G,1),G=null,c()):null==h(b,g)&&(r[b][G].push([g.x,g.y]),G=null,c()));null!=L&&1==u[b][L].length&&(aa||!y?(u[b].splice(L,1),L=null,c()):null==h(b,g)&&(u[b][L].push([g.x,g.y]),c()));q[b].el.style.cursor=null==D&&null==G?"move":"url("+imasroot+"/img/pen.cur), default";"undefined"!=typeof d&&d.preventDefault()}ca=
l;null!=b&&null!=w&&(y=A(q[b].el),-1<g.x&&g.x<q[b].width&&-1<g.y&&g.y<q[b].height?(0==w.mode&&1<q[b].dotline&&(0==w.subnum||w.subnum==v[b][w.num].length-1)&&25>Math.pow(v[b][w.num][0][0]-v[b][w.num][v[b][w.num].length-1][0],2)+Math.pow(v[b][w.num][0][1]-v[b][w.num][v[b][w.num].length-1][1],2)&&(0==w.subnum?(v[b][w.num][v[b][w.num].length-1][0]=v[b][w.num][0][0],v[b][w.num][v[b][w.num].length-1][1]=v[b][w.num][0][1]):(v[b][w.num][0][0]=v[b][w.num][v[b][w.num].length-1][0],v[b][w.num][0][1]=v[b][w.num][v[b][w.num].length-
1][1]),D=null,c()),w=null):(1==W[b]&&(g.y=q[b].imgheight/2),1==w.mode?N[b].splice(w.num,1):2==w.mode?K[b].splice(w.num,1):.5==w.mode?v[b].splice(w.num,1):0==w.mode?v[b][w.num][w.subnum]=ba:5<=w.mode&&10>w.mode?(r[b].splice(w.num,1),G=null):10<=w.mode&&11>w.mode&&(u[b].splice(w.num,1),L=null),w=null,c()));aa=!1;O?ka=window.setTimeout(function(){O=!1;I();a(document).on("mousemove.imathasdraw",m);a(document).on("touchstart.imathasdraw",function(a){O=!0;f(a)});a(document).on("mousedown.imathasdraw",f)},
350):(I(),a(document).on("mousemove.imathasdraw",m),a(document).on("touchstart.imathasdraw",function(a){O=!0;f(a)}),a(document).on("mousedown.imathasdraw",f))}function m(a){var d=null;ea=!1;var f=n(a);for(i in q){var g=A(q[i].el);if(g.x<f.x&&g.x+q[i].width>f.x&&g.y<f.y&&g.y+q[i].height>f.y){d=i;break}}null!=d&&(g=A(q[d].el),g={x:f.x-g.x,y:f.y-g.y},0<q[d].snaptogridx&&(g=t(g,d)),1==W[d]&&(g.y=q[d].imgheight/2),-1<g.x&&g.x<q[d].width&&-1<g.y&&g.y<q[d].height&&null==w&&null==D&&(g=h(d,g),q[d].el.style.cursor=
null==g?"url("+imasroot+"/img/pen.cur), default":"move"));if(null!=b){if(a.originalEvent.touches&&1<a.originalEvent.touches.length)return aa=!0;"undefined"!=typeof a&&a.preventDefault();g=A(q[b].el);g={x:f.x-g.x,y:f.y-g.y};0<q[b].snaptogridx&&(g=t(g,b));1==W[b]&&(g.y=q[b].imgheight/2);if(-1<g.x&&g.x<q[b].width&&-1<g.y&&g.y<q[b].height)return null==w?null!=D?!U||0!=q[b].mode&&.7!=q[b].mode?U&&.5==q[b].mode?(a=v[b][D].length-1,0==a?(a=Math.pow(v[b][D][a][0]-g.x,2)+Math.pow(v[b][D][a][1]-g.y,2),25<a?
(v[b][D].push([g.x,g.y]),c()):c(g.x,g.y)):(v[b][D][a]=[g.x,g.y],c())):c(g.x,g.y):(a=v[b][D].length-1,a=Math.pow(v[b][D][a][0]-g.x,2)+Math.pow(v[b][D][a][1]-g.y,2),25<a?(v[b][D].push([g.x,g.y]),c()):c(g.x,g.y)):null!=G?U?c():c(g.x,g.y):null!=L?U?c():c(g.x,g.y):(g=h(b,g),q[b].el.style.cursor=null==g?"url("+imasroot+"/img/pen.cur), default":"move"):(q[b].el.style.cursor="move",0==w.mode||.5==w.mode?v[b][w.num][w.subnum]=[g.x,g.y]:1==w.mode?N[b][w.num]=[g.x,g.y]:2==w.mode?K[b][w.num]=[g.x,g.y]:5<=w.mode&&
10>w.mode?r[b][w.num][w.subnum]=[g.x,g.y]:10<=w.mode&&11>w.mode&&(u[b][w.num][w.subnum]=[g.x,g.y]),c()),!1}}function n(a){a=a||window.event;if(O)return a=a.originalEvent.changedTouches[0]||a.originalEvent.touches[0],{x:a.pageX,y:a.pageY};if(a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=document.documentElement,c=document.body;if(b&&(b.scrollTop||b.scrollLeft))var d=b.scrollLeft,b=b.scrollTop;else c?(d=c.scrollLeft,b=c.scrollTop):b=d=0;return{x:a.clientX+d,y:a.clientY+b}}function t(a,b){var c=
a.x-q[b].imgborder+q[b].xmin*q[b].pixperx,d=a.y-q[b].imgborder-q[b].ymax*q[b].pixpery,c=Math.round(Math.round(c/(q[b].pixperx*q[b].snaptogridx))*q[b].pixperx*q[b].snaptogridx+q[b].imgborder-q[b].xmin*q[b].pixperx),d=Math.round(Math.round(d/(q[b].pixpery*q[b].snaptogridy))*q[b].pixpery*q[b].snaptogridy+q[b].imgborder+q[b].ymax*q[b].pixpery);return{x:c,y:d}}function z(a,b){var c=A(a),d=n(b);return{x:d.x-c.x,y:d.y-c.y}}function A(a){for(var b=0,c=0;a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;
b+=a.offsetLeft;c+=a.offsetTop;return{x:b,y:c}}function I(){a(document).off("mousedown.imathasdraw").off("mousemove.imathasdraw").off("mouseup.imathasdraw");a(document).off("touchstart.imathasdraw").off("touchmove.imathasdraw").off("touchend.imathasdraw")}function Z(c){I();a(document).on("mousemove.imathasdraw",m);a(document).on("touchstart.imathasdraw",function(a){O=!0;f(a)});a(document).on("mousedown.imathasdraw",f);try{CanvasRenderingContext2D.prototype.dashedLine=function(a,c,d,f,h){void 0==h&&
(h=10);this.beginPath();this.moveTo(a,c);var l=d-a,m=f-c;h=Math.sqrt(l*l+m*m)/h;l/=h;m/=h;h=Math.round(h);for(var n=0;n++<h&&-1<c&&c<q[b].imgheight+1&&-1<a&&a<q[b].imgwidth+1;)a+=l,c+=m,this[0==n%2?"moveTo":"lineTo"](a,c);this[0==n%2?"moveTo":"lineTo"](d,f);this.stroke();this.closePath()}}catch(g){}for(var h in canvases)if("undefined"==typeof c||c==h){if(null!=drawla[h]&&2<drawla[h].length){v[canvases[h][0]]=drawla[h][0];N[canvases[h][0]]=drawla[h][1];K[canvases[h][0]]=drawla[h][2];J[canvases[h][0]]=
[];r[canvases[h][0]]=[];if(3<drawla[h].length&&0<drawla[h][3].length)for(var l=0;l<drawla[h][3].length;l++)J[canvases[h][0]][l]=drawla[h][3][l][0],r[canvases[h][0]][l]=[drawla[h][3][l].slice(1,3),drawla[h][3][l].slice(3)];S[canvases[h][0]]=[];u[canvases[h][0]]=[];if(4<drawla[h].length&&0<drawla[h][4].length)for(l=0;l<drawla[h][4].length;l++)S[canvases[h][0]][l]=drawla[h][4][l][0],u[canvases[h][0]][l]=[drawla[h][4][l].slice(1,3),drawla[h][4][l].slice(3,5),drawla[h][4][l].slice(5)]}d(canvases[h][0],
"canvas"+canvases[h][0],imasroot+"/filter/graph/imgs/"+canvases[h][1],"qn"+canvases[h][0],canvases[h][2],canvases[h][3],canvases[h][4],canvases[h][5],canvases[h][6],canvases[h][7],canvases[h][8],canvases[h][9],canvases[h][10],canvases[h][11],canvases[h][12])}}function fa(b){for(var c,d=0;d<y.idnums.length;d++)if("undefined"==typeof b||b==y.idnums[d]){var g=c=y.idnums[d],f,h,l;f=document.getElementById("qn"+g).value;(l=f.match(/\(-oo,([\-\d\.]+)\)U\(([\-\d\.]+),oo\)/))?(f=3,h=l[1],l=l[2]):(l=f.match(/\(-oo,([\-\d\.]+)\)/))?
(f=0,h=l[1],l=2.5):(l=f.match(/\(([\-\d\.]+),oo\)/))?(f=1,h=l[1],l=2.5):(l=f.match(/\(([\-\d\.]+),([\-\d\.]+)\)/))?(f=2,h=l[1],l=l[2]):(f=0,h=-1.5,l=2.5);document.getElementById("slid1"+g).style.left=60*h+250-6+"px";document.getElementById("slid2"+g).style.left=60*l+250-6+"px";document.getElementById("shaderegions"+g).selectedIndex=f;y.curslider.type=document.getElementById("shaderegions"+g).value;la(g);a("#slid1"+c).on("touchstart.normslider mousedown.normslider",ma);a("#slid2"+c).on("touchstart.normslider mousedown.normslider",
ma)}}function ma(b){b=b||window.event;b.originalEvent.touches&&0<b.originalEvent.touches.length?(O=!0,a(document).on("touchmove.normslider",na),a(document).on("touchend.normslider",oa)):(a(document).on("mousemove.normslider",na),a(document).on("mouseup.normslider",oa));y.curslider.el=b.target||b.srcElement;y.curslider.id=y.curslider.el.id.substring(5);y.curslider.type=document.getElementById("shaderegions"+y.curslider.id).value;y.curslider.outnode=document.getElementById(y.outputid);y.curslider.startpos=
z(y.curslider.el,b);y.curslider.el.parentNode.style.cursor="pointer";A(y.curslider.el.parentNode);b.preventDefault&&b.preventDefault();return!1}function na(a){var b=y.curslider.id;a=a||window.event;var c=z(y.curslider.el.parentNode,a);if(!(5>c.x||c.x>y.curslider.el.parentNode.offsetWidth-5||5>c.y||c.y>y.curslider.el.parentNode.offsetHeight-5))return y.curslider.el.style.left=6*Math.round((c.x-y.curslider.startpos.x-10)/6)+10+"px",pa(b),a.preventDefault&&a.preventDefault(),!1}function oa(b){null!==
y.curslider.el&&(O=!1,a(document).off("touchmove.normslider touchend.normslider"),a(document).off("mousemove.normslider mouseup.normslider"),y.curslider.el.parentNode.style.cursor="",y.curslider.el=null)}function pa(a){var b=parseInt(document.getElementById("slid1"+a).style.left)+6,c=parseInt(document.getElementById("slid2"+a).style.left)+6,d=Math.min(b,c),f=Math.max(b,c);"2O"==y.curslider.type?document.getElementById("normleft"+a).style.width=d+1+"px":"1L"==y.curslider.type?document.getElementById("normleft"+
a).style.width=b+1+"px":"2B"==y.curslider.type&&(document.getElementById("normleft"+a).style.left=d+"px",document.getElementById("normleft"+a).style.width=f-d+1+"px");"2O"==y.curslider.type?document.getElementById("normright"+a).style.width=500-f+"px":"1R"==y.curslider.type&&(document.getElementById("normright"+a).style.width=500-b+"px");var d=(-4+(b-10)/60).toFixed(1),f=(-4+(c-10)/60).toFixed(1),h=document.getElementById("slid1txt"+a);h.innerHTML=d;h.style.left=b-6+"px";b=document.getElementById("slid2txt"+
a);b.innerHTML=f;b.style.left=c-6+"px";c=Math.min(d,f);b=Math.max(d,f);if("2O"==y.curslider.type)var l="(-oo,"+c+")U("+b+",oo)";else"2B"==y.curslider.type?l="("+c+","+b+")":"1L"==y.curslider.type?l="(-oo,"+d+")":"1R"==y.curslider.type&&(l="("+d+",oo)");document.getElementById("qn"+a).value=l}function la(a){var b=document.getElementById("shaderegions"+a).value;y.curslider.type=b;var c=parseInt(document.getElementById("slid1"+a).style.left)+6,d=parseInt(document.getElementById("slid2"+a).style.left)+
6,f=Math.min(c,d),d=Math.max(c,d);"1R"==b||"1L"==b?(document.getElementById("slid2"+a).style.display="none",document.getElementById("slid2txt"+a).style.display="none","1R"==b?(document.getElementById("normleft"+a).style.display="none",document.getElementById("normright"+a).style.display="",document.getElementById("normright"+a).style.right="0px",document.getElementById("normright"+a).style.width=500-c+"px"):(document.getElementById("normright"+a).style.display="none",document.getElementById("normleft"+
a).style.display="",document.getElementById("normleft"+a).style.left="0px",document.getElementById("normleft"+a).style.width=c+"px")):"2O"==b?(document.getElementById("slid2"+a).style.display="",document.getElementById("slid2txt"+a).style.display="",document.getElementById("normleft"+a).style.display="",document.getElementById("normright"+a).style.display="",document.getElementById("normright"+a).style.right="0px",document.getElementById("normleft"+a).style.left="0px",document.getElementById("normright"+
a).style.width=500-d+"px",document.getElementById("normleft"+a).style.width=f+"px"):"2B"==b&&(document.getElementById("slid2"+a).style.display="",document.getElementById("slid2txt"+a).style.display="",document.getElementById("normleft"+a).style.display="",document.getElementById("normright"+a).style.display="none",document.getElementById("normleft"+a).style.left=f+"px",document.getElementById("normleft"+a).style.width=d-f+"px");pa(a)}var U=!1,q=[],da=[],ga=[],v=[],N=[],K=[],r=[],J=[],u=[],S=[],D=
null,ha=[],W=[],G=null,L=null,ja=["rgb(0,0,255)","rgb(255,0,0)","rgb(0,255,0)"],qa=["rgba(0,0,255,.4)","rgba(255,0,0,.4)","rgba(0,255,0,.4)"],w=null,ba=null,b=null,ia=!1,O=!1,aa=!1,ea=!1,ka=null,ra=0,ca=null;"undefined"!=typeof initstack?initstack.push(Z):a(function(){Z()});var y={idnums:[],curslider:{el:null,startpos:[0,0],outnode:null}};"undefined"!=typeof initstack&&initstack.push(fa);return{initCanvases:Z,clearcanvas:function(a){v[a].length=0;N[a].length=0;K[a].length=0;r[a].length=0;J[a].length=
0;u[a].length=0;S[a].length=0;b=a;c();w=D=b=null},settool:function(a,d,f){for(var g=document.getElementById("drawtools"+d),h=g.getElementsByTagName("span"),l=0;l<h.length;l++)h[l].className="";h=g.getElementsByTagName("img");for(l=0;l<h.length;l++)h[l].className="";a.className="sel";q[d].mode=f;b=d;c()},addnormslider:function(a){-1==arraysearch(a,y.idnums)?y.idnums.push(a):fa(a)},chgnormtype:la}}(jQuery),ehcurel=null,ehclosetimer=0,ehddclosetimer=0,curehdd=null,eecurel=null;
function showeh(a){if(null==eecurel){unhideeh(0);el=document.getElementById(a);var d=document.getElementById("eh");a!=ehcurel?(ehcurel=a,p=findPos(el),d.style.display="block",d.style.left=p[0]+"px",d.style.top=p[1]+el.offsetHeight+"px"):(d.style.display="none",ehcurel=null);el.focus()}}function reshrinkeh(a){null==eecurel&&a==ehcurel&&(document.getElementById("ehdd").style.display="block",document.getElementById("eh").style.display="none",ehcurel=null,curehdd=a,unhideeh(0))}
function unhideeh(a){ehcancelclosetimer()}function hideeh(a){null==ehcurel?ehddclosetimer=window.setTimeout(function(){curehdd=null;document.getElementById("ehdd").style.display="none"},250):ehclosetimer=window.setTimeout(reallyhideeh,250)}function reallyhideeh(){document.getElementById("eh").style.display="none";ehcurel=null}function ehcancelclosetimer(){ehclosetimer&&(window.clearTimeout(ehclosetimer),ehclosetimer=null)}
function showehdd(a,d,c){if((null==eecurel||eecurel!=a)&&null!=document.getElementById("tips"+c)){ehddclosetimer&&a!=curehdd&&(window.clearTimeout(ehddclosetimer),ehddclosetimer=null);if(a!=ehcurel){var f=document.getElementById("ehdd"),h=document.getElementById(a);p=findPos(h);document.getElementById("ehddtext").innerHTML=d;document.getElementById("eh").innerHTML=document.getElementById("tips"+c).innerHTML;f.style.display="block";f.style.left=p[0]+"px";f.style.top=p[1]+h.offsetHeight+"px"}curehdd=
a}}function updateehpos(){if(curehdd||ehcurel){var a=document.getElementById("eh"),d=document.getElementById("ehdd"),c=document.getElementById(curehdd||ehcurel);p=findPos(c);a.style.left=p[0]+"px";a.style.top=p[1]+c.offsetHeight+"px";d.style.left=p[0]+"px";d.style.top=p[1]+c.offsetHeight+"px"}};
