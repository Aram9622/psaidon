/* ASCIIsvg.js
Ver 1.2.7 Oct 13, 2005 (c) Peter Jipsen http://www.chapman.edu/~jipsen
Modified for IMathas by David Lippman */
var ASnoSVG=false,checkIfSVGavailable=true,notifyIfNoSVG=false,alertIfNoSVG=false,xunitlength=20,yunitlength=20,origin=[0,0],defaultwidth=300;defaultheight=200;defaultborder=[0,0,0,0];var border=defaultborder,strokewidth,strokedasharray,stroke,fill,fontstyle,fontfamily,fontsize,fontweight,fontstroke,fontfill,fontbackground,fillopacity=.5,markerstrokewidth="1",markerstroke="black",markerfill="yellow",marker="none",arrowfill=stroke,dotradius=4,ticklength=4,axesstroke="black",gridstroke="grey",pointerpos=null,coordinates=null,above="above",below="below",left="left",right="right",aboveleft="aboveleft",aboveright="aboveright",belowleft="belowleft",belowright="belowright",cpi="π",ctheta="θ",pi=Math.PI,ln=Math.log,e=Math.E,arcsin=Math.asin,arccos=Math.acos,arctan=Math.atan,sec=function(a){return 1/Math.cos(a)},csc=function(a){return 1/Math.sin(a)},cot=function(a){return 1/Math.tan(a)},xmin,xmax,ymin,ymax,xscl,yscl,xgrid,ygrid,xtick,ytick,initialized,isOldIE=document.createElementNS==null,picture,svgpicture,doc,width,height,a,b,c,d,i,n,p,t,x,y,arcsec=function(a){return arccos(1/a)},arccsc=function(a){return arcsin(1/a)},arccot=function(a){return arctan(1/a)},sinh=function(a){return(Math.exp(a)-Math.exp(-a))/2},cosh=function(a){return(Math.exp(a)+Math.exp(-a))/2},tanh=function(a){return(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))},sech=function(a){return 1/cosh(a)},csch=function(a){return 1/sinh(a)},coth=function(a){return 1/tanh(a)},arcsinh=function(a){return ln(a+Math.sqrt(a*a+1))},arccosh=function(a){return ln(a+Math.sqrt(a*a-1))},arctanh=function(a){return ln((1+a)/(1-a))/2},sech=function(a){return 1/cosh(a)},csch=function(a){return 1/sinh(a)},coth=function(a){return 1/tanh(a)},arcsech=function(a){return arccosh(1/a)},arccsch=function(a){return arcsinh(1/a)},arccoth=function(a){return arctanh(1/a)},sign=function(a){return a==0?0:a<0?-1:1},logten=function(a){return Math.LOG10E*Math.log(a)};function factorial(a,b){if(b==null)b=1;for(var c=a-b;c>0;c-=b)a*=c;return a<0?NaN:a==0?1:a}function C(d,c){for(var b=1,a=0;a<c;a++)b*=(d-a)/(c-a);return b}function chop(b,a){if(a==null)a=0;return Math.floor(b*Math.pow(10,a))/Math.pow(10,a)}function ran(b,c,a){if(a==null)a=0;return chop((c+Math.pow(10,-a)-b)*Math.random()+b,a)}function myCreateElementXHTML(a){return isOldIE?document.createElement(a):document.createElementNS("http://www.w3.org/1999/xhtml",a)}function isSVGavailable(){var a=null;if((ver=navigator.userAgent.toLowerCase().match(/webkit\/(\d+)/))!=a)if(ver[1]>531)return a;if(navigator.product&&navigator.product=="Gecko"){var rv=navigator.userAgent.toLowerCase().match(/rv:\s*([\d\.]+)/);if(rv!=a){rv=rv[1].split(".");if(rv.length<3)rv[2]=0;if(rv.length<2)rv[1]=0}return rv!=a&&1e4*rv[0]+100*rv[1]+1*rv[2]>=10800?a:1}else if(navigator.appName.slice(0,9)=="Microsoft"){version=parseFloat(navigator.appVersion.split("MSIE")[1]);if(version>=9)return a;else try{var oSVG=eval("new ActiveXObject('Adobe.SVGCtl.3');");return null}catch(e){return 1}}else return 1}function less(a,b){return a<b}function setText(b,c){var a=document.getElementById(c);if(a!=null)if(a.childNodes.length!=0)a.childNodes[0].nodeValue=b;else a.appendChild(document.createTextNode(b))}function myCreateElementSVG(a){return isOldIE?doc.createElement(a):doc.createElementNS("http://www.w3.org/2000/svg",a)}function getX(){return(doc.getElementById("pointerpos").getAttribute("cx")-origin[0])/xunitlength}function getY(){return(height-origin[1]-doc.getElementById("pointerpos").getAttribute("cy"))/yunitlength}function mousemove_listener(a){if(svgpicture.getAttribute("xbase")!=null)pointerpos.cx.baseVal.value=a.clientX-svgpicture.getAttribute("xbase");if(svgpicture.getAttribute("ybase")!=null)pointerpos.cy.baseVal.value=a.clientY-svgpicture.getAttribute("ybase")}function top_listener(a){svgpicture.setAttribute("ybase",a.clientY)}function bottom_listener(a){svgpicture.setAttribute("ybase",a.clientY-height+1)}function left_listener(a){svgpicture.setAttribute("xbase",a.clientX)}function right_listener(a){svgpicture.setAttribute("xbase",a.clientX-width+1)}function switchTo(a){picture=document.getElementById(a);width=picture.getAttribute("width")-0;height=picture.getAttribute("height")-0;strokewidth="1";stroke="black";fill="none";marker="none";if((picture.nodeName=="EMBED"||picture.nodeName=="embed")&&isOldIE){svgpicture=picture.getSVGDocument().getElementById("root");doc=picture.getSVGDocument()}else{picture.setAttribute("onmousemove","updateCoords"+(a.slice(a.length-1)-1)+"()");svgpicture=picture;doc=document}xunitlength=svgpicture.getAttribute("xunitlength")-0;yunitlength=svgpicture.getAttribute("yunitlength")-0;xmin=svgpicture.getAttribute("xmin")-0;xmax=svgpicture.getAttribute("xmax")-0;ymin=svgpicture.getAttribute("ymin")-0;ymax=svgpicture.getAttribute("ymax")-0;origin=[svgpicture.getAttribute("ox")-0,svgpicture.getAttribute("oy")-0]}function updatePicture(obj){var a=null,src=document.getElementById(typeof obj=="string"?obj:"picture"+(obj+1)+"input").value;xmin=a;xmax=a;ymin=a;ymax=a;xscl=a;xgrid=a;yscl=a;ygrid=a;initialized=false;switchTo(typeof obj=="string"?obj.slice(0,8):"picture"+(obj+1));src=src.replace(/plot\(\x20*([^\"f\[][^\n\r]+?)\,/g,'plot("$1",');src=src.replace(/plot\(\x20*([^\"f\[][^\n\r]+)\)/g,'plot("$1")');src=src.replace(/([0-9])([a-zA-Z])/g,"$1*$2");src=src.replace(/\)([\(0-9a-zA-Z])/g,")*$1");try{with(Math)eval(src)}catch(err){alert(err+"\n"+src)}}function showHideCode(c){var b="none",a=c.nextSibling;while(a!=null&&a.nodeName!="BUTTON"&&a.nodeName!="button")a=a.nextSibling;if(a.style.display==b)a.style.display="";else a.style.display=b;while(a!=null&&a.nodeName!="TEXTAREA"&&a.nodeName!="textarea")a=a.previousSibling;if(a.style.display==b)a.style.display="";else a.style.display=b}function hideCode(){}function showcode(){}function nobutton(){}function setBorder(a,c,d,b){if(b==null)border=[a,a,a,a];else border=[a,c,d,b]}function initPicture(x_min,x_max,y_min,y_max){var j="mousemove",i="onmousemove",h="pointerpos",g="style",f="height",e="width",d="number",c="none",b="black",a=null;if(!initialized){strokewidth="1";strokedasharray=a;stroke=b;fill=c;fontstyle="italic";fontfamily="times";fontsize="16";fontweight="normal";fontstroke=b;fontfill=b;fontbackground=c;marker=c;initialized=true;if(x_min!=a)xmin=x_min;if(x_max!=a)xmax=x_max;if(y_min!=a)ymin=y_min;if(y_max!=a)ymax=y_max;if(xmin==a)xmin=-5;if(xmax==a)xmax=5;if(typeof xmin!=d||typeof xmax!=d||xmin>=xmax)alert("Picture requires at least two numbers: xmin < xmax");else if(y_max!=a&&(typeof y_min!=d||typeof y_max!=d||y_min>=y_max))alert("initPicture(xmin,xmax,ymin,ymax) requires numbers ymin < ymax");else{width=picture.getAttribute(e);if(width==a||width=="")width=defaultwidth;height=picture.getAttribute(f);if(height==a||height=="")height=defaultheight;xunitlength=(width-border[0]-border[2])/(xmax-xmin);yunitlength=xunitlength;if(ymin==a){origin=[-xmin*xunitlength+border[0],height/2];ymin=-(height-border[1]-border[3])/(2*yunitlength);ymax=-ymin}else{if(ymax!=a)yunitlength=(height-border[1]-border[3])/(ymax-ymin);else ymax=(height-border[1]-border[3])/yunitlength+ymin;origin=[-xmin*xunitlength+border[0],-ymin*yunitlength+border[1]]}winxmin=Math.max(border[0]-5,0);winxmax=Math.min(width-border[2]+5,width);winymin=Math.max(border[3]-5,0);winymax=Math.min(height-border[1]+5,height);if(isOldIE){svgpicture=picture.getSVGDocument().getElementById("root");while(svgpicture.childNodes.length()>5)svgpicture.removeChild(svgpicture.lastChild);svgpicture.setAttribute(e,width);svgpicture.setAttribute(f,height);doc=picture.getSVGDocument()}else{var qnode=document.createElementNS("http://www.w3.org/2000/svg","svg");qnode.setAttribute("id",picture.getAttribute("id"));qnode.setAttribute(g,"display:inline; "+picture.getAttribute(g));qnode.setAttribute(e,picture.getAttribute(e));qnode.setAttribute(f,picture.getAttribute(f));if(picture.parentNode!=a)picture.parentNode.replaceChild(qnode,picture);else svgpicture.parentNode.replaceChild(qnode,svgpicture);svgpicture=qnode;doc=document;pointerpos=doc.getElementById(h);if(pointerpos==a){pointerpos=myCreateElementSVG("circle");pointerpos.setAttribute("id",h);pointerpos.setAttribute("cx",0);pointerpos.setAttribute("cy",0);pointerpos.setAttribute("r",.5);pointerpos.setAttribute("fill","red");svgpicture.appendChild(pointerpos)}}svgpicture.setAttribute("xunitlength",xunitlength);svgpicture.setAttribute("yunitlength",yunitlength);svgpicture.setAttribute("xmin",xmin);svgpicture.setAttribute("xmax",xmax);svgpicture.setAttribute("ymin",ymin);svgpicture.setAttribute("ymax",ymax);svgpicture.setAttribute("ox",origin[0]);svgpicture.setAttribute("oy",origin[1]);var node=myCreateElementSVG("rect");node.setAttribute("x","0");node.setAttribute("y","0");node.setAttribute(e,width);node.setAttribute(f,height);node.setAttribute(g,"stroke-width:1;fill:white");svgpicture.appendChild(node);if(!isOldIE&&picture.getAttribute(i)!=a){svgpicture.addEventListener(j,mousemove_listener,true);var st=picture.getAttribute(i);svgpicture.addEventListener(j,eval(st.slice(0,st.indexOf("("))),true);node=myCreateElementSVG("polyline");node.setAttribute("points","0,0 "+width+",0");node.setAttribute("style","stroke:white; stroke-width:3");node.addEventListener("mousemove",top_listener,true);svgpicture.appendChild(node);node=myCreateElementSVG("polyline");node.setAttribute("points","0,"+height+" "+width+","+height);node.setAttribute("style","stroke:white; stroke-width:3");node.addEventListener("mousemove",bottom_listener,true);svgpicture.appendChild(node);node=myCreateElementSVG("polyline");node.setAttribute("points","0,0 0,"+height);node.setAttribute("style","stroke:white; stroke-width:3");node.addEventListener("mousemove",left_listener,true);svgpicture.appendChild(node);node=myCreateElementSVG("polyline");node.setAttribute("points",width-1+",0 "+(width-1)+","+height);node.setAttribute("style","stroke:white; stroke-width:3");node.addEventListener("mousemove",right_listener,true);svgpicture.appendChild(node)}border=defaultborder}}}function line(b,c,d){var e="arrowdot",a;if(d!=null)a=doc.getElementById(d);if(a==null){a=myCreateElementSVG("path");a.setAttribute("id",d);svgpicture.appendChild(a)}a.setAttribute("d","M"+(b[0]*xunitlength+origin[0])+","+(height-b[1]*yunitlength-origin[1])+" "+(c[0]*xunitlength+origin[0])+","+(height-c[1]*yunitlength-origin[1]));a.setAttribute("stroke-width",strokewidth);strokedasharray!=null&&a.setAttribute("stroke-dasharray",strokedasharray);a.setAttribute("stroke",stroke);if(fill.substr(0,5)=="trans"){a.setAttribute("fill",fill.substring(5));a.setAttribute("fill-opacity",fillopacity)}else a.setAttribute("fill",fill);if(marker=="dot"||marker==e){ASdot(b,4,markerstroke,markerfill);marker==e&&arrowhead(b,c);ASdot(c,4,markerstroke,markerfill)}else marker=="arrow"&&arrowhead(b,c)}function path(c,g,e){var f=null;if(e==f)e="";var a,d,b;if(g!=f)a=doc.getElementById(g);if(a==f){a=myCreateElementSVG("path");a.setAttribute("id",g);svgpicture.appendChild(a)}if(typeof c=="string")d=c;else{d="M";d+=c[0][0]*xunitlength+origin[0]+","+(height-c[0][1]*yunitlength-origin[1])+" "+e;for(b=1;b<c.length;b++)d+=c[b][0]*xunitlength+origin[0]+","+(height-c[b][1]*yunitlength-origin[1])+" "}a.setAttribute("d",d);a.setAttribute("stroke-width",strokewidth);strokedasharray!=f&&a.setAttribute("stroke-dasharray",strokedasharray);a.setAttribute("stroke",stroke);if(fill.substr(0,5)=="trans"){a.setAttribute("fill",fill.substring(5));a.setAttribute("fill-opacity",fillopacity)}else a.setAttribute("fill",fill);if(marker=="dot"||marker=="arrowdot")for(b=0;b<c.length;b++)(e!="C"&&e!="T"||b!=1&&b!=2)&&ASdot(c[b],4,markerstroke,markerfill)}function curve(a,b){path(a,b,"T")}function circle(c,d,b){var a;if(b!=null)a=doc.getElementById(b);if(a==null){a=myCreateElementSVG("circle");a.setAttribute("id",b);svgpicture.appendChild(a)}a.setAttribute("cx",c[0]*xunitlength+origin[0]);a.setAttribute("cy",height-c[1]*yunitlength-origin[1]);a.setAttribute("r",d*xunitlength);a.setAttribute("stroke-width",strokewidth);a.setAttribute("stroke",stroke);if(fill.substr(0,5)=="trans"){a.setAttribute("fill",fill.substring(5));a.setAttribute("fill-opacity",fillopacity)}else a.setAttribute("fill",fill)}function loop(b,a,c){if(a==null)a=[1,0];path([b,[b[0]+a[0],b[1]+a[1]],[b[0]-a[1],b[1]+a[0]],b],c,"C");(marker=="arrow"||marker=="arrowdot")&&arrowhead([b[0]+Math.cos(1.4)*a[0]-Math.sin(1.4)*a[1],b[1]+Math.sin(1.4)*a[0]+Math.cos(1.4)*a[1]],b)}function sector(b,c,d,e,f){var a,l;if(f!=null)a=doc.getElementById(f);if(a==null){a=myCreateElementSVG("path");a.setAttribute("id",f);svgpicture.appendChild(a)}var g=0;if(Math.abs(e-d)>3.142)g=1;var h=0;if(e<d)h=1;var i=[b[0]+c*Math.cos(d),b[1]+c*Math.sin(d)],j=[b[0]+c*Math.cos(e),b[1]+c*Math.sin(e)],k="M"+(b[0]*xunitlength+origin[0])+","+(height-b[1]*yunitlength-origin[1])+" L"+(i[0]*xunitlength+origin[0])+","+(height-i[1]*yunitlength-origin[1])+" A"+c*xunitlength+","+c*yunitlength+" 0 "+g+","+h+" "+(j[0]*xunitlength+origin[0])+","+(height-j[1]*yunitlength-origin[1])+" z";a.setAttribute("d",k);a.setAttribute("stroke-width",strokewidth);a.setAttribute("stroke",stroke);if(fill.substr(0,5)=="trans"){a.setAttribute("fill",fill.substring(5));a.setAttribute("fill-opacity",fillopacity)}else a.setAttribute("fill",fill)}function arc(a,d,e,g){var f="arrowdot",c,b;if(g!=null)c=doc.getElementById(g);if(e==null){b=[d[0]-a[0],d[1]-a[1]];e=Math.sqrt(b[0]*b[0]+b[1]*b[1])}if(c==null){c=myCreateElementSVG("path");c.setAttribute("id",g);svgpicture.appendChild(c)}c.setAttribute("d","M"+(a[0]*xunitlength+origin[0])+","+(height-a[1]*yunitlength-origin[1])+" A"+e*xunitlength+","+e*yunitlength+" 0 0,0 "+(d[0]*xunitlength+origin[0])+","+(height-d[1]*yunitlength-origin[1]));c.setAttribute("stroke-width",strokewidth);c.setAttribute("stroke",stroke);if(fill.substr(0,5)=="trans"){c.setAttribute("fill",fill.substring(5));c.setAttribute("fill-opacity",fillopacity)}else c.setAttribute("fill",fill);if(marker=="arrow"||marker==f){u=[(d[1]-a[1])/4,(a[0]-d[0])/4];b=[(d[0]-a[0])/2,(d[1]-a[1])/2];b=[a[0]+b[0]+u[0],a[1]+b[1]+u[1]]}else b=[a[0],a[1]];if(marker=="dot"||marker==f){ASdot(a,4,markerstroke,markerfill);marker==f&&arrowhead(b,d);ASdot(d,4,markerstroke,markerfill)}else marker=="arrow"&&arrowhead(b,d)}function ellipse(c,d,e,b){var a;if(b!=null)a=doc.getElementById(b);if(a==null){a=myCreateElementSVG("ellipse");a.setAttribute("id",b);svgpicture.appendChild(a)}a.setAttribute("cx",c[0]*xunitlength+origin[0]);a.setAttribute("cy",height-c[1]*yunitlength-origin[1]);a.setAttribute("rx",d*xunitlength);a.setAttribute("ry",e*yunitlength);a.setAttribute("stroke-width",strokewidth);a.setAttribute("stroke",stroke);if(fill.substr(0,5)=="trans"){a.setAttribute("fill",fill.substring(5));a.setAttribute("fill-opacity",fillopacity)}else a.setAttribute("fill",fill)}function rect(c,d,e,f,g){var b=null,a;if(e!=b)a=doc.getElementById(e);if(a==b){a=myCreateElementSVG("rect");a.setAttribute("id",e);svgpicture.appendChild(a)}a.setAttribute("x",Math.min(c[0],d[0])*xunitlength+origin[0]);a.setAttribute("y",height-Math.max(d[1],c[1])*yunitlength-origin[1]);a.setAttribute("width",Math.abs(d[0]-c[0])*xunitlength);a.setAttribute("height",Math.abs(d[1]-c[1])*yunitlength);f!=b&&a.setAttribute("rx",f*xunitlength);g!=b&&a.setAttribute("ry",g*yunitlength);a.setAttribute("stroke-width",strokewidth);a.setAttribute("stroke",stroke);if(fill.substr(0,5)=="trans"){a.setAttribute("fill",fill.substring(5));a.setAttribute("fill-opacity",fillopacity)}else a.setAttribute("fill",fill)}function text(a,d,c,b){a[0]=a[0]*xunitlength+origin[0];a[1]=a[1]*yunitlength+origin[1];textabs(a,d,c,b)}function textabs(i,q,b,c,m,p){var o="stroke-width",l="none",n="transform",k="start",g=null;if(c==g)c=0;else c=(360-c)%360;var h="middle",d=0,e=0;if(c==270){var e=0,d=fontsize/3;if(b!=g){if(b.match(/left/))d=-fontsize/2-2;if(b.match(/right/))d=1*fontsize+2;if(b.match(/above/)){h=k;e=-fontsize/2-2}if(b.match(/below/)){h="end";e=fontsize/2+2}}}if(c==90){var e=0,d=-fontsize/3;if(b!=g){if(b.match(/left/))d=-fontsize-2;if(b.match(/right/))d=fontsize/2+2;if(b.match(/above/)){h="end";e=-fontsize/2-2}if(b.match(/below/)){h=k;e=fontsize/2+2}}}if(c==0){var d=0,e=fontsize/3;if(b!=g){if(b.match(/above/))e=-fontsize/3-2;if(b.match(/below/))e=1*fontsize+2;if(b.match(/right/)){h=k;d=fontsize/3+2}if(b.match(/left/)){h="end";d=-fontsize/3-2}}}var a;if(m!=g)a=doc.getElementById(m);if(a==g){a=myCreateElementSVG("text");a.setAttribute("id",m);svgpicture.appendChild(a);a.appendChild(doc.createTextNode(q))}a.lastChild.nodeValue=q;a.setAttribute("x",i[0]+d);a.setAttribute("y",height-i[1]+e);c!=0&&a.setAttribute(n,"rotate("+c+" "+(i[0]+d)+" "+(height-i[1]+e)+")");a.setAttribute("font-style",p!=g?p:fontstyle);a.setAttribute("font-family",fontfamily);a.setAttribute("font-size",fontsize);a.setAttribute("font-weight",fontweight);a.setAttribute("text-anchor",h);fontstroke!=l&&a.setAttribute("stroke",fontstroke);fontfill!=l&&a.setAttribute("fill",fontfill);a.setAttribute(o,"0px");if(fontbackground!=l)try{var j=a.getBBox(),f=myCreateElementSVG("rect");f.setAttribute("fill",fontbackground);f.setAttribute(o,"0px");f.setAttribute("x",j.x-2);f.setAttribute("y",j.y-1);f.setAttribute("width",j.width+4);f.setAttribute("height",j.height+2);c!=0&&f.setAttribute(n,"rotate("+c+" "+(i[0]+d)+" "+(height-i[1]+e)+")");svgpicture.insertBefore(f,a)}catch(r){}return i}function ASdot(d,e,c,b){if(c==null)c=stroke;if(b==null)b=fill;var a=myCreateElementSVG("circle");a.setAttribute("cx",d[0]*xunitlength+origin[0]);a.setAttribute("cy",height-d[1]*yunitlength-origin[1]);a.setAttribute("r",e);a.setAttribute("stroke-width",strokewidth);a.setAttribute("stroke",c);a.setAttribute("fill",b);svgpicture.appendChild(a)}function dot(l,g,m,n,e){var k="stroke",j="stroke-width",i=" L ",d=" ",h=" M ",f=null,a,b=l[0]*xunitlength+origin[0],c=height-l[1]*yunitlength-origin[1];if(e!=f)a=doc.getElementById(e);if(g=="+"||g=="-"||g=="|"){if(a==f){a=myCreateElementSVG("path");a.setAttribute("id",e);svgpicture.appendChild(a)}if(g=="+"){a.setAttribute("d",h+(b-ticklength)+d+c+i+(b+ticklength)+d+c+h+b+d+(c-ticklength)+i+b+d+(c+ticklength));a.setAttribute(j,.5);a.setAttribute(k,axesstroke)}else{if(g=="-")a.setAttribute("d",h+(b-ticklength)+d+c+i+(b+ticklength)+d+c);else a.setAttribute("d",h+b+d+(c-ticklength)+i+b+d+(c+ticklength));a.setAttribute(j,strokewidth);a.setAttribute(k,stroke)}}else{if(a==f){a=myCreateElementSVG("circle");a.setAttribute("id",e);svgpicture.appendChild(a)}a.setAttribute("cx",b);a.setAttribute("cy",c);a.setAttribute("r",dotradius);a.setAttribute(j,strokewidth);a.setAttribute(k,stroke);a.setAttribute("fill",g=="open"?"white":stroke)}m!=f&&text(l,m,n==f?"below":n,e==f?e:e+"label")}function arrowhead(f,g){var d,h=[f[0]*xunitlength+origin[0],height-f[1]*yunitlength-origin[1]],b=[g[0]*xunitlength+origin[0],height-g[1]*yunitlength-origin[1]],a=[b[0]-h[0],b[1]-h[1]],e=Math.sqrt(a[0]*a[0]+a[1]*a[1]);if(e>1e-8){a=[a[0]/e,a[1]/e];d=[-a[1],a[0]];var c=myCreateElementSVG("path");c.setAttribute("d","M "+(b[0]-15*a[0]-4*d[0])+" "+(b[1]-15*a[1]-4*d[1])+" L "+(b[0]-3*a[0])+" "+(b[1]-3*a[1])+" L "+(b[0]-15*a[0]+4*d[0])+" "+(b[1]-15*a[1]+4*d[1])+" z");c.setAttribute("stroke-width",markerstrokewidth);c.setAttribute("stroke",stroke);c.setAttribute("fill",stroke);svgpicture.appendChild(c)}}function chopZ(b){var c=b.indexOf(".");if(c==-1)return b;for(var a=b.length-1;a>c&&b.charAt(a)=="0";a--);if(a==c)a--;return b.slice(0,a+1)}function grid(a,b){axes(a,b,null,a,b)}function noaxes(){!initialized&&initPicture()}function axes(dx,dy,k,e,h,dox,doy){var l="stroke-width",f=" ",a=",",g=" M",i=true,b=null,j="string",x,y,ldx,ldy,lx,ly,lxp,lyp,d,c;!initialized&&initPicture();if(typeof dx==j){k=dx;dx=b}if(typeof dy==j){e=dy;dy=b}if(xscl!=b){dx=xscl;e=xscl;k=dx}if(yscl!=b){dy=yscl;h=yscl}if(xtick!=b)dx=xtick;if(ytick!=b)dy=ytick;if(dox==b)dox=i;if(doy==b)doy=i;if(dox=="off"||dox==0)dox=false;else dox=i;if(doy=="off"||doy==0)doy=false;else doy=i;dx=dx==b?xunitlength:dx*xunitlength;dy=dy==b?dx:dy*yunitlength;fontsize=Math.floor(Math.min(dx/1.5,dy/1.5,16));ticklength=fontsize/4;if(xgrid!=b)e=xgrid;if(ygrid!=b)h=ygrid;if(e!=b){e=typeof e==j?dx:e*xunitlength;h=h==b?dy:h*yunitlength;d=myCreateElementSVG("path");c="";if(dox&&e>0){for(x=origin[0];x<=winxmax;x=x+e)if(x>=winxmin)c+=g+x+a+winymin+f+x+a+winymax;for(x=origin[0]-e;x>=winxmin;x=x-e)if(x<=winxmax)c+=g+x+a+winymin+f+x+a+winymax}if(doy&&h>0){for(y=height-origin[1];y<=winymax;y=y+h)if(y>=winymin)c+=g+winxmin+a+y+f+winxmax+a+y;for(y=height-origin[1]-h;y>=winymin;y=y-h)if(y<=winymax)c+=g+winxmin+a+y+f+winxmax+a+y}d.setAttribute("d",c);d.setAttribute(l,.5);d.setAttribute("stroke",gridstroke);d.setAttribute("fill",fill);svgpicture.appendChild(d)}d=myCreateElementSVG("path");if(dox)c="M"+winxmin+a+(height-origin[1])+f+winxmax+a+(height-origin[1]);if(doy)c+=g+origin[0]+a+winymin+f+origin[0]+a+winymax;if(dox){for(x=origin[0];x<winxmax;x=x+dx)if(x>=winymin)c+=g+x+a+(height-origin[1]+ticklength)+f+x+a+(height-origin[1]-ticklength);for(x=origin[0]-dx;x>winxmin;x=x-dx)if(x<=winxmax)c+=g+x+a+(height-origin[1]+ticklength)+f+x+a+(height-origin[1]-ticklength)}if(doy){for(y=height-origin[1];y<winymax;y=y+dy)if(y>=winymin)c+=g+(origin[0]+ticklength)+a+y+f+(origin[0]-ticklength)+a+y;for(y=height-origin[1]-dy;y>winymin;y=y-dy)if(y<=winymax)c+=g+(origin[0]+ticklength)+a+y+f+(origin[0]-ticklength)+a+y}if(k!=b)with(Math){ldx=dx/xunitlength;ldy=dy/yunitlength;lx=xmin>0||xmax<0?xmin:0;ly=ymin>0||ymax<0?ymin:0;lxp=ly==0?"below":"above";lyp=lx==0?"left":"right";var ddx=floor(1.1-log(ldx)/log(10))+1,ddy=floor(1.1-log(ldy)/log(10))+1;if(ddy<0)ddy=0;if(ddx<0)ddx=0;if(dox){for(x=doy?ldx:0;x<=xmax;x=x+ldx)x>=xmin&&text([x,ly],chopZ(x.toFixed(ddx)),lxp);for(x=-ldx;xmin<=x;x=x-ldx)x<=xmax&&text([x,ly],chopZ(x.toFixed(ddx)),lxp)}if(doy){for(y=dox?ldy:0;y<=ymax;y=y+ldy)y>=ymin&&text([lx,y],chopZ(y.toFixed(ddy)),lyp);for(y=-ldy;ymin<=y;y=y-ldy)y<=ymax&&text([lx,y],chopZ(y.toFixed(ddy)),lyp)}}d.setAttribute("d",c);d.setAttribute(l,.5);d.setAttribute("stroke",axesstroke);d.setAttribute("fill",fill);svgpicture.appendChild(d)}function safepow(c,a){if(c<0&&Math.floor(a)!=a){for(var b=3;b<50;b+=2)if(Math.abs(Math.round(b*a)-b*a)<1e-6)return Math.round(b*a)%2==0?Math.pow(Math.abs(c),a):-1*Math.pow(Math.abs(c),a);return Math.sqrt(-1)}else return Math.pow(c,a)}function nthroot(b,a){return safepow(a,1/b)}function nthlogten(a,b){return Math.log(b)/Math.log(a)}function matchtolower(a){return a.toLowerCase()}function mathjs(a,k){var t=" at position ",s="Error: incorrect syntax in ",o="Z",n="A",m="z",l="a",j="9",i="0",r="Error: missing argument",u=")([^a-df-zA-Z#])",p="g",h=")",g="(";a=a.replace("[",g);a=a.replace("]",h);a=a.replace(/arc(sin|cos|tan)/g,"a#r#c $1");if(k!=null){var q=new RegExp("(sqrt|ln|log|sin|cos|tan|sec|csc|cot|abs|root)[(]",p);a=a.replace(q,"$1#(");var q=new RegExp(g+k+")("+k+")$",p);a=a.replace(q,"($1)($2)");var q=new RegExp(g+k+")(a#|sqrt|ln|log|sin|cos|tan|sec|csc|cot|abs|root)",p);a=a.replace(q,"($1)$2");var q=new RegExp(g+k+")("+k+u,p);a=a.replace(q,"($1)($2)$3");var q=new RegExp("([^a-df-zA-Z#])("+k+u,p);a=a.replace(q,"$1($2)$3");var q=new RegExp("^("+k+")([^a-df-zA-Z])",p);a=a.replace(q,"($1)$2");var q=new RegExp("([^a-df-zA-Z])("+k+")$",p);a=a.replace(q,"$1($2)")}a=a.replace(/#/g,"");a=a.replace(/a#r#c\s+(sin|cos|tan)/g,"arc$1");a=a.replace(/\s/g,"");a=a.replace(/(Sin|Cos|Tan|Sec|Csc|Cot|Arc|Abs|Log|Ln|Sqrt)/g,matchtolower);a=a.replace(/log_(\d+)\(/g,"nthlog($1,");a=a.replace(/log/g,"logten");if(a.indexOf("^-1")!=-1){a=a.replace(/sin\^-1/g,"arcsin");a=a.replace(/cos\^-1/g,"arccos");a=a.replace(/tan\^-1/g,"arctan");a=a.replace(/sec\^-1/g,"arcsec");a=a.replace(/csc\^-1/g,"arccsc");a=a.replace(/cot\^-1/g,"arccot");a=a.replace(/sinh\^-1/g,"arcsinh");a=a.replace(/cosh\^-1/g,"arccosh");a=a.replace(/tanh\^-1/g,"arctanh");a=a.replace(/sech\^-1/g,"arcsech");a=a.replace(/csch\^-1/g,"arccsch");a=a.replace(/coth\^-1/g,"arccoth")}a=a.replace(/root\((\d+)\)\(/g,"nthroot($1,");a=a.replace(/([0-9])E([\-0-9])/g,"$1(EE)$2");a=a.replace(/^e$/g,"(E)");a=a.replace(/pi/g,"(pi)");a=a.replace(/^e([^a-zA-Z])/g,"(E)$1");a=a.replace(/([^a-zA-Z])e$/g,"$1(E)");a=a.replace(/([^a-zA-Z])e([^a-zA-Z])/g,"$1(E)$2");a=a.replace(/([0-9])([\(a-zA-Z])/g,"$1*$2");a=a.replace(/(!)([0-9\(])/g,"$1*$2");a=a.replace(/([0-9])\*\(EE\)([\-0-9])/,"$1e$2");a=a.replace(/\)([\(0-9a-zA-Z])/g,")*$1");var f,c,d,b,e;while((f=a.indexOf("^"))!=-1){if(f==0)return r;c=f-1;b=a.charAt(c);if(b>=i&&b<=j){c--;while(c>=0&&(b=a.charAt(c))>=i&&b<=j)c--;if(b=="."){c--;while(c>=0&&(b=a.charAt(c))>=i&&b<=j)c--}}else if(b==h){e=1;c--;while(c>=0&&e>0){b=a.charAt(c);if(b==g)e--;else if(b==h)e++;c--}while(c>=0&&(b=a.charAt(c))>=l&&b<=m||b>=n&&b<=o)c--}else if(b>=l&&b<=m||b>=n&&b<=o){c--;while(c>=0&&(b=a.charAt(c))>=l&&b<=m||b>=n&&b<=o)c--}else return s+a+t+c;if(f==a.length-1)return r;d=f+1;b=a.charAt(d);nch=a.charAt(d+1);if(b>=i&&b<=j||b=="-"&&nch!=g||b=="."){d++;while(d<a.length&&(b=a.charAt(d))>=i&&b<=j)d++;if(b=="."){d++;while(d<a.length&&(b=a.charAt(d))>=i&&b<=j)d++}}else if(b==g||b=="-"&&nch==g){if(b=="-")d++;e=1;d++;while(d<a.length&&e>0){b=a.charAt(d);if(b==g)e++;else if(b==h)e--;d++}}else if(b>=l&&b<=m||b>=n&&b<=o){d++;while(d<a.length&&(b=a.charAt(d))>=l&&b<=m||b>=n&&b<=o)d++;if(b==g&&a.slice(f+1,d).match(/^(sin|cos|tan|sec|csc|cot|logten|log|ln|exp|arcsin|arccos|arctan|arcsec|arccsc|arccot|sinh|cosh|tanh|sech|csch|coth|arcsinh|arccosh|arctanh|arcsech|arccsch|arccoth|sqrt|abs|nthroot)$/)){e=1;d++;while(d<a.length&&e>0){b=a.charAt(d);if(b==g)e++;else if(b==h)e--;d++}}}else return s+a+t+d;a=a.slice(0,c+1)+"safepow("+a.slice(c+1,f)+","+a.slice(f+1,d)+h+a.slice(d)}while((f=a.indexOf("!"))!=-1){if(f==0)return r;c=f-1;b=a.charAt(c);if(b>=i&&b<=j){c--;while(c>=0&&(b=a.charAt(c))>=i&&b<=j)c--;if(b=="."){c--;while(c>=0&&(b=a.charAt(c))>=i&&b<=j)c--}}else if(b==h){e=1;c--;while(c>=0&&e>0){b=a.charAt(c);if(b==g)e--;else if(b==h)e++;c--}while(c>=0&&(b=a.charAt(c))>=l&&b<=m||b>=n&&b<=o)c--}else if(b>=l&&b<=m||b>=n&&b<=o){c--;while(c>=0&&(b=a.charAt(c))>=l&&b<=m||b>=n&&b<=o)c--}else return s+a+t+c;a=a.slice(0,c+1)+"factorial("+a.slice(c+1,f)+h+a.slice(f+1)}return a}function slopefield(fun,dx,dy){var g=fun;if(typeof fun=="string")eval("g = function(x,y){ with(Math) return "+mathjs(fun)+" }");var gxy,x,y,u,v,dz;if(dx==null)dx=1;if(dy==null)dy=1;dz=Math.sqrt(dx*dx+dy*dy)/6;var x_min=Math.ceil(xmin/dx),y_min=Math.ceil(ymin/dy);for(x=x_min;x<=xmax;x+=dx)for(y=y_min;y<=ymax;y+=dy){gxy=g(x,y);if(!isNaN(gxy)){if(Math.abs(gxy)=="Infinity"){u=0;v=dz}else{u=dz/Math.sqrt(1+gxy*gxy);v=gxy*u}line([x-u,y-v],[x+u,y+v])}}}function drawPictures(){drawPics()}function parseShortScript(sscript,gw,gh){var b="; ",a=",";if(sscript==null){initialized=false;sscript=picture.sscr}var sa=sscript.split(a);if(gw&&gh){sa[9]=gw;sa[10]=gh;sscript=sa.join(a);picture.setAttribute("sscr",sscript)}picture.setAttribute("width",sa[9]);picture.setAttribute("height",sa[10]);picture.style.width=sa[9]+"px";picture.style.height=sa[10]+"px";if(sa.length>10){commands="setBorder(5);";commands+="width="+sa[9]+"; height="+sa[10]+";";commands+="initPicture("+sa[0]+a+sa[1]+a+sa[2]+a+sa[3]+");";commands+="axes("+sa[4]+a+sa[5]+a+sa[6]+a+sa[7]+a+sa[8]+");";var inx=11,eqnlist="Graphs: ";while(sa.length>inx+9){commands+='stroke="'+sa[inx+7]+'";';commands+='strokewidth="'+sa[inx+8]+'";';if(sa[inx+9]!="")commands+='strokedasharray="'+sa[inx+9].replace(/\s+/g,a)+'";';if(sa[inx]=="slope"){eqnlist+="dy/dx="+sa[inx+1]+b;commands+='slopefield("'+sa[inx+1]+'",'+sa[inx+2]+a+sa[inx+2]+");"}else if(sa[inx]=="label"){eqnlist+="label="+sa[inx+1]+b;commands+="text(["+sa[inx+5]+a+sa[inx+6]+'],"'+sa[inx+1]+'");'}else{if(sa[inx]=="func"){eqnlist+="y="+sa[inx+1]+b;eqn='"'+sa[inx+1]+'"'}else if(sa[inx]=="polar"){eqnlist+="r="+sa[inx+1]+b;eqn='["cos(t)*('+sa[inx+1]+')","sin(t)*('+sa[inx+1]+')"]'}else if(sa[inx]=="param"){eqnlist+="[x,y]=["+sa[inx+1]+a+sa[inx+2]+"]; ";eqn='["'+sa[inx+1]+'","'+sa[inx+2]+'"]'}if(typeof eval(sa[inx+5])=="number")commands+="plot("+eqn+","+sa[inx+5]+","+sa[inx+6]+",null,null,"+sa[inx+3]+","+sa[inx+4]+");";else commands+="plot("+eqn+",null,null,null,null,"+sa[inx+3]+","+sa[inx+4]+");"}inx+=10}try{eval(commands)}catch(e){setTimeout(function(){parseShortScript(sscript,gw,gh)},100)}picture.setAttribute("alt",eqnlist);return commands}}function drawPics(){var a="sscr",index,nd;pictures=document.getElementsByTagName("embed");if(!ASnoSVG)try{for(var i=0;i<pictures.length;i++)if(pictures[i].getAttribute(a)!=""||pictures[i].getAttribute("script")!="")if(pictures[i].getSVGDocument().getElementById("root")==null){setTimeout(drawPics,100);return}}catch(e){setTimeout(drawPics,100);return}var len=pictures.length;for(index=0;index<len;index++){picture=!ASnoSVG&&isOldIE?pictures[index]:pictures[0];if(!ASnoSVG){initialized=false;var sscr=picture.getAttribute(a);if(sscr!=null&&sscr!="")try{parseShortScript(sscr)}catch(e){}else{src=picture.getAttribute("script");if(src!=null&&src!="")try{with(Math)eval(src)}catch(err){alert(err+"\n"+src)}}}else if(picture.getAttribute(a)!=""){n=document.createElement("img");n.setAttribute("style",picture.getAttribute("style"));n.setAttribute("src",AScgiloc+"?sscr="+encodeURIComponent(picture.getAttribute(a)));pn=picture.parentNode;pn.replaceChild(n,picture)}}}function plot(fun,x_min,x_max,points,id,min_type,max_type){var pth=[],f=function(a){return a},g=fun,name=null;if(typeof fun=="string")eval("g = function(x){ with(Math) return "+mathjs(fun)+" }");else if(typeof fun=="object"){eval("f = function(t){ with(Math) return "+mathjs(fun[0])+" }");eval("g = function(t){ with(Math) return "+mathjs(fun[1])+" }")}if(typeof x_min=="string"){name=x_min;x_min=xmin}else name=id;var min=x_min==null?xmin:x_min,max=x_max==null?xmax:x_max;if(max<=min)return null;var inc=max-min-1e-6*(max-min);inc=points==null?inc/200:inc/points;for(var gt,t=min;t<=max;t+=inc){gt=g(t);if(!(isNaN(gt)||Math.abs(gt)=="Infinity"))pth[pth.length]=[f(t),gt]}path(pth,name);if(min_type==1)arrowhead(pth[1],pth[0]);else if(min_type==2)dot(pth[0],"open");else min_type==3&&dot(pth[0],"closed");if(max_type==1)arrowhead(pth[pth.length-2],pth[pth.length-1]);else if(max_type==2)dot(pth[pth.length-1],"open");else max_type==3&&dot(pth[pth.length-1],"closed");return p}function updateCoords(a){var b="aboveleft";switchTo("picture"+(a+1));var c=getX(),d=getY();if((xmax-c)*xunitlength>6*fontsize||(d-ymin)*yunitlength>2*fontsize)text([xmax,ymin],"("+c.toFixed(2)+", "+d.toFixed(2)+")",b,"AScoord"+a,"");else text([xmax,ymin]," ",b,"AScoord"+a,"")}function updateCoords0(){updateCoords(0)}function updateCoords1(){updateCoords(1)}function updateCoords2(){updateCoords(2)}function updateCoords3(){updateCoords(3)}function updateCoords4(){updateCoords(4)}function updateCoords5(){updateCoords(5)}function updateCoords6(){updateCoords(6)}function updateCoords7(){updateCoords(7)}function updateCoords8(){updateCoords(8)}function updateCoords9(){updateCoords(9)}ASfn=[function(){updatePicture(0)},function(){updatePicture(1)},function(){updatePicture(2)},function(){updatePicture(3)},function(){updatePicture(4)},function(){updatePicture(5)},function(){updatePicture(6)},function(){updatePicture(7)},function(){updatePicture(8)},function(){updatePicture(9)}];ASupdateCoords=[function(){updateCoords(0)},function(){updateCoords(1)},function(){updateCoords(2)},function(){updateCoords(3)},function(){updateCoords(4)},function(){updateCoords(5)},function(){updateCoords(6)},function(){updateCoords(7)},function(){updateCoords(8)},function(){updateCoords(9)}];function generic(){drawPictures()}if(typeof window.addEventListener!="undefined")window.addEventListener("load",generic,false);else if(typeof document.addEventListener!="undefined")document.addEventListener("load",generic,false);else if(typeof window.attachEvent!="undefined")window.attachEvent("onload",generic);else if(typeof window.onload=="function"){var existing=onload;window.onload=function(){existing();generic()}}else window.onload=generic;if(checkIfSVGavailable){checkifSVGavailable=false;nd=isSVGavailable();ASnoSVG=nd!=null};